"use strict";(self.webpackChunkmonitor_admin=self.webpackChunkmonitor_admin||[]).push([[9289],{850:(e,t,a)=>{a.d(t,{$6:()=>n,DF:()=>s,kD:()=>r});var l=a(4689);const n=e=>l.Z.get("web/sourcemap",e),r=e=>l.Z.post("web/sourcemap",e),s=e=>l.Z.get("web/sourcemap/".concat(e))},1172:(e,t,a)=>{a.d(t,{L:()=>n,U:()=>l});const l=(e,t)=>{let a=[];try{const l=t=>{if(a.push(t),(null===t||void 0===t?void 0:t.key)===e)throw new Error("GOT IT!");if(null!==t&&void 0!==t&&t.children&&(null===t||void 0===t?void 0:t.children.length)>0){for(let e=0;e<(null===t||void 0===t?void 0:t.children.length);e++)l(t.children[e]);a.pop()}else a.pop()};for(let e=0;e<t.length;e++)l(t[e]);return[]}catch(l){return a.map((e=>e.label))}};function n(e,t){const a=(new TextEncoder).encode(t).buffer,l=new Blob([a],{type:"text/plain;charset=utf-8"}),n=new FileReader;n.readAsDataURL(l),n.onload=t=>{const a=document.createElement("a");a.href=t.target.result,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},9289:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=a(2351),n=a(1773),r=a(2641),s=a(6473),o=a(2954),c=a(2791),i=a(850),d=a(732),u=a(6776),p=a(3070),h=a(5722),m=a(7828),f=a(9389),x=a(891),v=a(4941),g=a(1087),Z=a(3329);const w=e=>{const[t]=p.Z.useForm(),[a,l]=(0,c.useState)([]),[s,o]=(0,c.useState)(""),[w]=(0,g.lr)(),[j,y]=h.ZP.useMessage(),b={accept:".js.map",multiple:!1,maxCount:1,onRemove:e=>{const t=a.indexOf(e),n=a.slice();n.splice(t,1),l(n)},beforeUpload:e=>{const t=new FileReader;return t.readAsBinaryString(e),t.onload=function(){o(this.result)},l([...a,e]),!1},fileList:a};return(0,Z.jsxs)(m.Z,{title:"\u4e0a\u4f20SourceMap",placement:"right",width:500,closable:!1,open:e.open,extra:(0,Z.jsx)(n.Z,{children:(0,Z.jsx)(d.Z,{onClick:e.onClose})}),children:[y,(0,Z.jsxs)(p.Z,{layout:"vertical",form:t,onFinish:async a=>{const l=w.get("appId");if(l)try{await(0,i.kD)({filename:a.name,sourcemap:s,site_type:"web",appId:l,release:a.release}),t.resetFields(),h.ZP.success("\u521b\u5efa\u6210\u529f"),e.onSuccess()}catch(n){console.log(n)}else j.open({type:"error",content:"appId\u4e0d\u80fd\u4e3a\u7a7a!"})},initialValues:{type:1},children:[(0,Z.jsx)(p.Z.Item,{label:"js sourcemap\u6587\u4ef6\u540d",name:"name",rules:[{required:!0}],children:(0,Z.jsx)(f.Z,{})}),(0,Z.jsx)(p.Z.Item,{label:"\u4e0a\u4f20 Sourcemap \u6587\u4ef6",name:"dragger",rules:[{required:!0}],children:(0,Z.jsx)(p.Z.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList,noStyle:!0,children:(0,Z.jsxs)(v.Z,{...b,children:[(0,Z.jsx)("p",{className:"ant-upload-drag-icon",children:(0,Z.jsx)(u.Z,{})}),(0,Z.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904\u4e0a\u4f20"}),(0,Z.jsx)("p",{className:"ant-upload-hint",children:"\u53ea\u652f\u6301.js.map\u6587\u4ef6"})]})})}),(0,Z.jsx)(p.Z.Item,{label:"Release",name:"release",rules:[{required:!0}],children:(0,Z.jsx)(x.Z,{showSearch:!0,allowClear:!0,placeholder:"\u9009\u62e9\u6216\u8f93\u5165\u5bf9\u5e94\u7248\u672c",optionFilterProp:"children",onChange:e=>{console.log("selected ".concat(e))},onSearch:e=>{console.log("search:",e)},filterOption:(e,t)=>{var a;return(null!==(a=null===t||void 0===t?void 0:t.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},options:[{value:"jack",label:"Jack"},{value:"lucy",label:"Lucy"},{value:"tom",label:"Tom"}]})}),(0,Z.jsx)(p.Z.Item,{children:(0,Z.jsx)(r.ZP,{type:"primary",htmlType:"submit",children:"\u786e\u5b9a"})})]})]})};var j=a(1172);const y=()=>{const[e,t]=(0,c.useState)(1),[a,d]=(0,c.useState)(10),[u,p]=(0,c.useState)(0),[h,m]=(0,c.useState)([]),[f,x]=(0,c.useState)(!1),v=[{title:"\u6587\u4ef6\u540d",dataIndex:"filename",width:50},{title:"release",dataIndex:"release",width:100},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"filesize",width:50},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"createdAt",width:100},{title:"\u64cd\u4f5c",width:100,render:(e,t)=>(0,Z.jsx)(n.Z,{size:"middle",children:(0,Z.jsx)(r.ZP,{type:"link",onClick:e=>g(e,t.key.toString()),children:"\u4e0b\u8f7d Sourcemap"})})}],g=async(e,t)=>{const a=await(0,i.DF)(t);a.data&&(0,j.L)("".concat(a.data.filename,".js.map"),a.data.sourcemap)},y=async()=>{const t=await(0,i.$6)({pageNum:e,pageSize:a});if(t.data){p(t.data.total);const e=[];t.data.data.forEach((t=>{e.push({key:t.smId,release:t.release,createdAt:t.createdAt,filename:t.filename,filesize:t.filesize})})),m(e)}};(0,c.useEffect)((()=>{y()}),[]),(0,c.useEffect)((()=>{y()}),[e,a]);const b={showSizeChanger:!0,onChange:(e,a)=>{t(e),d(a)},defaultCurrent:e,total:u};return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(s.Z,{title:"sourcemap\u5217\u8868",style:{marginTop:"20px"},children:[(0,Z.jsx)(r.ZP,{type:"primary",icon:(0,Z.jsx)(l.Z,{}),onClick:e=>x(!0),children:"\u4e0a\u4f20Sourcemap"}),(0,Z.jsx)(o.Z,{style:{marginTop:"12px"},pagination:b,columns:v,dataSource:h})]}),(0,Z.jsx)(w,{onSuccess:()=>{x(!1),y()},open:f,onClose:()=>x(!1)})]})}},6776:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(7462),n=a(2791);const r={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};var s=a(4291),o=function(e,t){return n.createElement(s.Z,(0,l.Z)({},e,{ref:t,icon:r}))};const c=n.forwardRef(o)},2351:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(7462),n=a(2791);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var s=a(4291),o=function(e,t){return n.createElement(s.Z,(0,l.Z)({},e,{ref:t,icon:r}))};const c=n.forwardRef(o)}}]);
//# sourceMappingURL=9289.2129f77e.chunk.js.map