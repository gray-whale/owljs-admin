{"version":3,"file":"static/js/95.fe895161.chunk.js","mappings":"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","sources":["api/modules/web/log.ts","views/web/custom/log/index.tsx"],"sourcesContent":["import { ResLog } from \"@/api/interface/web/log\";\nimport http from \"../../index\"\nimport { ResPage } from \"../../interface\";\nimport { ReqQuery } from \"@/api/interface/web/log\";\n\n// 获取日志列表\nexport const getLogList = (params: ReqQuery) => {\n    return http.get<ResPage<ResLog>>('log', params);\n};","import { getLogList } from \"@/api/modules/web/log\";\nimport { Card, message } from \"antd\";\nimport Table, { ColumnsType } from \"antd/es/table\";\nimport { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\n\ninterface DataType {\n    key: React.Key;\n    level: string;\n    content: string;\n    metrics: string;\n    categories: string;\n}\n\nconst LogList = () => {\n    \n    const [pageNum, setPageNum] = useState(1);\n    const [pageSize, setPageSize] = useState(10);\n    const [logTotal, setLogTotal] = useState(0);\n    const [logList, setLogList] = useState<DataType[]>([]);\n    const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n    const [searchParams] = useSearchParams();\n    const [messageApi, contextHolder] = message.useMessage();\n\n    const columns: ColumnsType<DataType> = [\n        {\n            title: '日志级别',\n            dataIndex: 'level',\n            width: 100,\n        },\n        {\n            title: '日志内容',\n            dataIndex: 'content',\n            width: 200,\n        },\n        {\n            title: '自定义数值',\n            dataIndex: 'metrics',\n            width: 200,\n        },\n        {\n            title: '事件本身的维度',\n            dataIndex: 'categories',\n            width: 200,\n        },\n    ];\n\n    const onSelectChange = (newSelectedRowKeys: React.Key[]) => {\n        setSelectedRowKeys(newSelectedRowKeys);\n    };\n\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: onSelectChange,\n    };\n\n    const initLogList = async () => {\n        const appId = searchParams.get('appId');\n        if (!appId) {\n            messageApi.open({\n                type: 'error',\n                content: 'appId不能为空!',\n            });\n            return;\n        }\n        const result = await getLogList({ pageNum, pageSize,appId });\n        if (result.data) {\n            setLogTotal(result.data.total);\n            const data: DataType[] = [];\n            result.data.data.forEach(item => {\n                data.push({\n                    key: item.logId,\n                    level: item.level,\n                    content: item.content,\n                    metrics: item.metrics,\n                    categories: item.categories\n                })\n            });\n            setLogList(data);\n        }\n    };\n\n    useEffect(() => {\n        initLogList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    useEffect(() => {\n        initLogList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [pageNum, pageSize])\n\n    const pagination = {\n        showSizeChanger: true,\n        onChange: (page: number, pageSize: number) => {\n            setPageNum(page);\n            setPageSize(pageSize);\n        },\n        defaultCurrent: pageNum,\n        total: logTotal\n    }\n\n    return (<Card title=\"日志列表\">{contextHolder}<Table style={{ marginTop: '12px' }} rowSelection={rowSelection} pagination={pagination} columns={columns} dataSource={logList} /></Card>);\n}\n\nexport default LogList;"],"names":["getLogList","params","http","get","_useState","useState","_useState2","_slicedToArray","pageNum","setPageNum","_useState3","_useState4","pageSize","setPageSize","_useState5","_useState6","logTotal","setLogTotal","_useState7","_useState8","logList","setLogList","_useState9","_useState10","selectedRowKeys","setSelectedRowKeys","_useSearchParams","useSearchParams","searchParams","_message$useMessage","message","useMessage","_message$useMessage2","messageApi","contextHolder","rowSelection","onChange","newSelectedRowKeys","initLogList","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","appId","result","data","wrap","_context","prev","next","open","type","content","abrupt","sent","total","forEach","item","push","key","logId","level","metrics","categories","stop","apply","arguments","useEffect","pagination","showSizeChanger","page","defaultCurrent","_jsxs","Card","title","children","_jsx","Table","style","marginTop","columns","dataIndex","width","dataSource"],"sourceRoot":""}