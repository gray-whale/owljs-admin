"use strict";(self.webpackChunkmonitor_admin=self.webpackChunkmonitor_admin||[]).push([[581],{3552:function(e,n,t){t.d(n,{BN:function(){return o},L5:function(){return a},P2:function(){return i},yk:function(){return c}});var r=t(2584),a=function(e){return r.Z.post("app",e)},c=function(e){return r.Z.get("app",e)},i=function(e){return r.Z.delete("app/".concat(e))},o=function(e){return r.Z.get("app/".concat(e))}},850:function(e,n,t){t.d(n,{$6:function(){return a},DF:function(){return i},kD:function(){return c}});var r=t(2584),a=function(e){return r.Z.get("web/sourcemap",e)},c=function(e){return r.Z.post("web/sourcemap",e)},i=function(e){return r.Z.get("web/sourcemap/".concat(e))}},1172:function(e,n,t){t.d(n,{L:function(){return a},U:function(){return r}});var r=function(e,n){var t=[];try{for(var r=function n(r){if(t.push(r),(null===r||void 0===r?void 0:r.key)===e)throw new Error("GOT IT!");if(null!==r&&void 0!==r&&r.children&&(null===r||void 0===r?void 0:r.children.length)>0){for(var a=0;a<(null===r||void 0===r?void 0:r.children.length);a++)n(r.children[a]);t.pop()}else t.pop()},a=0;a<n.length;a++)r(n[a]);return[]}catch(c){return t.map((function(e){return e.label}))}};function a(e,n){var t=(new TextEncoder).encode(n).buffer,r=new Blob([t],{type:"text/plain;charset=utf-8"}),a=new FileReader;a.readAsDataURL(r),a.onload=function(n){var t=document.createElement("a");t.href=n.target.result,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},581:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var r=t(4165),a=t(5861),c=t(9439),i=t(3552),o=t(3414),u=t(2351),l=t(7027),s=t(1046),d=t(7309),f=t(3218),p=t(3920),h=t(2499),m=t(6998),Z=t.n(m),x=t(2791),v=t(1087),g=t(1413),j=t(3433),y=t(850),w=t(732),b=t(6776),k=t(7846),S=t(7828),C=t(9389),I=t(9555),L=t(4941),P=t(3329),z=function(e){var n=k.Z.useForm(),t=(0,c.Z)(n,1)[0],i=(0,x.useState)([]),o=(0,c.Z)(i,2),u=o[0],f=o[1],p=(0,x.useState)(""),h=(0,c.Z)(p,2),m=h[0],Z=h[1],z=(0,v.lr)(),E=(0,c.Z)(z,1)[0],V=l.ZP.useMessage(),A=(0,c.Z)(V,2),F=A[0],T=A[1],N=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=E.get("appId")){n.next=4;break}return F.open({type:"error",content:"appId\u4e0d\u80fd\u4e3a\u7a7a!"}),n.abrupt("return");case 4:return n.prev=4,n.next=7,(0,y.kD)({filename:a.name,sourcemap:m,site_type:"web",appId:c,release:a.release});case 7:t.resetFields(),l.ZP.success("\u521b\u5efa\u6210\u529f"),e.onSuccess(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}(),R={accept:".js.map",multiple:!1,maxCount:1,onRemove:function(e){var n=u.indexOf(e),t=u.slice();t.splice(n,1),f(t)},beforeUpload:function(e){var n=new FileReader;return n.readAsBinaryString(e),n.onload=function(){Z(this.result)},f([].concat((0,j.Z)(u),[e])),!1},fileList:u};return(0,P.jsxs)(S.Z,{title:"\u4e0a\u4f20SourceMap",placement:"right",width:500,closable:!1,open:e.open,extra:(0,P.jsx)(s.Z,{children:(0,P.jsx)(w.Z,{onClick:e.onClose})}),children:[T,(0,P.jsxs)(k.Z,{layout:"vertical",form:t,onFinish:N,initialValues:{type:1},children:[(0,P.jsx)(k.Z.Item,{label:"js sourcemap\u6587\u4ef6\u540d",name:"name",rules:[{required:!0}],children:(0,P.jsx)(C.Z,{})}),(0,P.jsx)(k.Z.Item,{label:"\u4e0a\u4f20 Sourcemap \u6587\u4ef6",name:"dragger",rules:[{required:!0}],children:(0,P.jsx)(k.Z.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},noStyle:!0,children:(0,P.jsxs)(L.Z,(0,g.Z)((0,g.Z)({},R),{},{children:[(0,P.jsx)("p",{className:"ant-upload-drag-icon",children:(0,P.jsx)(b.Z,{})}),(0,P.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904\u4e0a\u4f20"}),(0,P.jsx)("p",{className:"ant-upload-hint",children:"\u53ea\u652f\u6301.js.map\u6587\u4ef6"})]}))})}),(0,P.jsx)(k.Z.Item,{label:"Release",name:"release",rules:[{required:!0}],children:(0,P.jsx)(I.Z,{showSearch:!0,allowClear:!0,placeholder:"\u9009\u62e9\u6216\u8f93\u5165\u5bf9\u5e94\u7248\u672c",optionFilterProp:"children",onChange:function(e){console.log("selected ".concat(e))},onSearch:function(e){console.log("search:",e)},filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:[{value:"jack",label:"Jack"},{value:"lucy",label:"Lucy"},{value:"tom",label:"Tom"}]})}),(0,P.jsx)(k.Z.Item,{children:(0,P.jsx)(d.ZP,{type:"primary",htmlType:"submit",children:"\u786e\u5b9a"})})]})]})},E=t(1172),V=function(){var e=(0,x.useState)(""),n=(0,c.Z)(e,2),t=n[0],m=n[1],g=(0,x.useState)(""),j=(0,c.Z)(g,2),w=j[0],b=j[1],k=(0,x.useState)(1),S=(0,c.Z)(k,2),C=S[0],I=S[1],L=(0,x.useState)(10),V=(0,c.Z)(L,2),A=V[0],F=V[1],T=(0,x.useState)(0),N=(0,c.Z)(T,2),R=N[0],B=N[1],H=(0,x.useState)([]),D=(0,c.Z)(H,2),M=D[0],q=D[1],O=(0,v.lr)(),U=(0,c.Z)(O,1)[0],_=(0,x.useState)(!1),K=(0,c.Z)(_,2),$=K[0],G=K[1],J=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=U.get("appId"))){e.next=6;break}return e.next=4,(0,i.BN)(n);case 4:(t=e.sent)&&200===t.code&&(m(t.data.apiKey),b(t.data.apiSecret));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){J()}),[]);var Q=function(e,n){e.stopPropagation(),Z()(n),l.ZP.success("\u5df2\u590d\u5236")},W=[{title:"\u6587\u4ef6\u540d",dataIndex:"filename",width:50},{title:"release",dataIndex:"release",width:100},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"filesize",width:50},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"createdAt",width:100},{title:"\u64cd\u4f5c",width:100,render:function(e,n){return(0,P.jsx)(s.Z,{size:"middle",children:(0,P.jsx)(d.ZP,{type:"link",onClick:function(e){return X(e,n.key.toString())},children:"\u4e0b\u8f7d Sourcemap"})})}}],X=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.DF)(t);case 2:(a=e.sent).data&&(0,E.L)("".concat(a.data.filename,".js.map"),a.data.sourcemap);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.$6)({pageNum:C,pageSize:A});case 2:(n=e.sent).data&&(B(n.data.total),t=[],n.data.data.forEach((function(e){t.push({key:e.smId,release:e.release,createdAt:e.createdAt,filename:e.filename,filesize:e.filesize})})),q(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){Y()}),[]),(0,x.useEffect)((function(){Y()}),[C,A]);var ee={showSizeChanger:!0,onChange:function(e,n){I(e),F(n)},defaultCurrent:C,total:R};return(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{style:{background:"#ffffff",padding:"12px 16px"},children:[(0,P.jsx)(h.Z,{level:5,children:"\u81ea\u52a8\u4e0a\u4f20\u5bc6\u94a5"}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("span",{children:[(0,P.jsx)("span",{style:{color:"#86909c"},children:"API Key:"}),"\xa0\xa0",t," ",(0,P.jsx)(o.Z,{style:{marginLeft:"8px"},onClick:function(e){return Q(e,t)}})]})," ",(0,P.jsxs)("span",{style:{marginLeft:"16px"},children:[" ",(0,P.jsx)("span",{style:{color:"#86909c"},children:"API Token:"}),"\xa0\xa0",w," ",(0,P.jsx)(o.Z,{style:{marginLeft:"8px"},onClick:function(e){return Q(e,w)}})]})]})]}),(0,P.jsxs)(f.Z,{title:"sourcemap\u5217\u8868",style:{marginTop:"20px"},children:[(0,P.jsx)(d.ZP,{type:"primary",icon:(0,P.jsx)(u.Z,{}),onClick:function(e){return G(!0)},children:"\u4e0a\u4f20Sourcemap"}),(0,P.jsx)(p.Z,{style:{marginTop:"12px"},pagination:ee,columns:W,dataSource:M})]}),(0,P.jsx)(z,{onSuccess:function(){G(!1),Y()},open:$,onClose:function(){return G(!1)}})]})}},6776:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(7462),a=t(2791),c={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},i=t(4291),o=function(e,n){return a.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:c}))};var u=a.forwardRef(o)},2351:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(7462),a=t(2791),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=t(4291),o=function(e,n){return a.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:c}))};var u=a.forwardRef(o)}}]);
//# sourceMappingURL=581.c3b49e67.chunk.js.map