"use strict";(self.webpackChunkmonitor_admin=self.webpackChunkmonitor_admin||[]).push([[446],{1446:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(4165),s=t(5861),a=t(9439),i=t(2584),l=t(9286),u=t(1046),o=t(2266),c=t(7309),d=t(7027),p=t(3218),h=t(7348),x=t(4123),Z=t(2791),m=t(7846),f=t(7828),j=t(9389),v=t(4424),w=t(5518),b=t(732),g=t(3329),I=function(e){return new Promise((function(n,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return n(r.result)},r.onerror=function(e){return t(e)}}))},k=function(e){var n=m.Z.useForm(),t=(0,a.Z)(n,1)[0],o=(0,Z.useState)(""),p=(0,a.Z)(o,2),h=p[0],k=p[1],C=(0,Z.useState)(!1),y=(0,a.Z)(C,2),P=y[0],S=y[1],N=(0,Z.useState)(""),z=(0,a.Z)(N,2),q=z[0],F=z[1],A=(0,Z.useState)(""),L=(0,a.Z)(A,2),T=L[0],E=L[1],O=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(s){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("\u5934\u50cf\u5730\u5740"+h),n.prev=1,n.next=4,r={loginName:s.loginName,userName:s.userName,password:s.password,phonenumber:s.phonenumber,email:s.email,sex:s.sex,avatar:h,status:s.status,remark:s.remark},i.Z.post("users",r);case 4:t.resetFields(),d.ZP.success("\u521b\u5efa\u6210\u529f"),e.onSuccess(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:case"end":return n.stop()}var r}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}(),R=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.url||n.preview){e.next=4;break}return e.next=3,I(n.originFileObj);case 3:n.preview=e.sent;case 4:F(n.url||n.preview),S(!0),E(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsxs)(f.Z,{title:"\u6dfb\u52a0\u7528\u6237",placement:"right",width:500,closable:!1,open:e.open,extra:(0,g.jsx)(u.Z,{children:(0,g.jsx)(b.Z,{onClick:e.onClose})}),children:[(0,g.jsxs)(m.Z,{labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",form:t,onFinish:O,initialValues:{sex:"0",status:"0"},children:[(0,g.jsx)(m.Z.Item,{label:"\u767b\u5f55\u540d",name:"loginName",rules:[{required:!0}],children:(0,g.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u767b\u5f55\u540d"})}),(0,g.jsx)(m.Z.Item,{label:"\u7528\u6237\u540d",name:"userName",rules:[{required:!0}],children:(0,g.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),(0,g.jsx)(m.Z.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0}],children:(0,g.jsx)(j.Z.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),(0,g.jsx)(m.Z.Item,{label:"\u786e\u8ba4\u5bc6\u7801",name:"repassword",rules:[{required:!0}],children:(0,g.jsx)(j.Z.Password,{placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801"})}),(0,g.jsx)(m.Z.Item,{label:"\u6027\u522b",name:"sex",rules:[{required:!0}],children:(0,g.jsxs)(v.ZP.Group,{children:[(0,g.jsx)(v.ZP,{value:"0",children:"\u7537"}),(0,g.jsx)(v.ZP,{value:"1",children:"\u5973"})]})}),(0,g.jsx)(m.Z.Item,{label:"\u90ae\u7bb1",name:"email",children:(0,g.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})}),(0,g.jsx)(m.Z.Item,{label:"\u624b\u673a\u53f7",name:"phonenumber",children:(0,g.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})}),(0,g.jsx)(m.Z.Item,{label:"\u72b6\u6001",name:"status",rules:[{required:!0}],children:(0,g.jsxs)(v.ZP.Group,{children:[(0,g.jsx)(v.ZP,{value:"0",children:"\u6b63\u5e38"}),(0,g.jsx)(v.ZP,{value:"1",children:"\u505c\u7528"})]})}),(0,g.jsx)(m.Z.Item,{label:"\u5934\u50cf",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},children:(0,g.jsx)(w.Z,{onPreview:R,action:"http://localhost:3000/file/upload",listType:"picture-card",onChange:function(e){var n=e.file;e.fileList,e.event;"done"===n.status&&(console.log(n.response),n.response&&200===n.response.code&&k(n.response.data.fileId))},maxCount:1,onRemove:function(){k("")},children:(0,g.jsx)(l.Z,{})})}),(0,g.jsx)(m.Z.Item,{name:"remark",label:"\u5907\u6ce8",children:(0,g.jsx)(j.Z.TextArea,{rows:4,showCount:!0,maxLength:100})}),(0,g.jsx)(m.Z.Item,{wrapperCol:{offset:6,span:18},children:(0,g.jsx)(c.ZP,{type:"primary",htmlType:"submit",children:"\u786e\u5b9a"})})]}),(0,g.jsx)(x.Z,{open:P,title:T,footer:null,onCancel:function(){return S(!1)},children:(0,g.jsx)("img",{alt:"example",style:{width:"100%"},src:q})})]})},C=function(){var e=(0,Z.useState)(1),n=(0,a.Z)(e,2),t=n[0],m=n[1],f=(0,Z.useState)(10),j=(0,a.Z)(f,2),v=j[0],w=j[1],b=(0,Z.useState)(0),I=(0,a.Z)(b,2),C=I[0],y=I[1],P=(0,Z.useState)([]),S=(0,a.Z)(P,2),N=S[0],z=S[1],q=(0,Z.useState)(!1),F=(0,a.Z)(q,2),A=F[0],L=F[1],T=(0,Z.useState)(!1),E=(0,a.Z)(T,2),O=E[0],R=E[1],G=(0,Z.useState)(""),V=(0,a.Z)(G,2),_=V[0],D=V[1],K=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r={pageNum:t,pageSize:v},i.Z.get("users",r);case 2:(n=e.sent).data&&(console.log(n.data),y(n.data.total),z(n.data.data));case 4:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();(0,Z.useEffect)((function(){K()}),[]),(0,Z.useEffect)((function(){K()}),[t,v]);var U=[{title:"\u767b\u5f55\u540d",dataIndex:"loginName",width:100},{title:"\u7528\u6237\u540d",dataIndex:"userName",width:100},{title:"\u6027\u522b",dataIndex:"sex",width:50,render:function(e,n){return(0,g.jsx)(u.Z,{size:"middle",children:"0"===n.sex?"\u7537":"\u5973"})}},{title:"\u90ae\u7bb1",dataIndex:"email",width:100},{title:"\u624b\u673a\u53f7",dataIndex:"phonenumber",width:100},{title:"\u72b6\u6001",dataIndex:"status",width:50,render:function(e,n){return(0,g.jsx)(u.Z,{size:"middle",children:"0"===n.status?"\u6b63\u5e38":"\u505c\u7528"})}},{title:"\u5934\u50cf",dataIndex:"avatar",width:100,render:function(e,n){return(0,g.jsx)(u.Z,{size:"middle",children:n.avatar?(0,g.jsx)(o.C,{src:n.avatar.url}):""})}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",width:100},{title:"\u64cd\u4f5c",width:100,render:function(e,n){return(0,g.jsxs)(u.Z,{size:"middle",children:[(0,g.jsx)(c.ZP,{type:"link",children:"\u4fee\u6539"}),(0,g.jsx)(c.ZP,{type:"link",danger:!0,onClick:function(e){D(n.userId),R(!0)},children:"\u5220\u9664"})]})}}],B=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!1),e.next=3,n=_,i.Z.delete("users/".concat(n));case 3:200===e.sent.code&&d.ZP.success("\u5220\u9664\u6210\u529f");case 5:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),H={showSizeChanger:!0,onChange:function(e,n){m(e),w(n)},defaultCurrent:t,total:C};return(0,g.jsxs)("div",{children:[(0,g.jsx)(p.Z,{children:(0,g.jsx)(c.ZP,{type:"primary",icon:(0,g.jsx)(l.Z,{}),onClick:function(e){return L(!0)},children:"\u65b0\u589e\u7528\u6237"})}),(0,g.jsx)(p.Z,{title:"\u7528\u6237\u5217\u8868",style:{marginTop:"20px"},children:(0,g.jsx)(h.Z,{rowKey:function(e){return e.userId},pagination:H,columns:U,dataSource:N})}),(0,g.jsx)(x.Z,{title:"\u63d0\u793a!",open:O,onOk:B,onCancel:function(){R(!1)},children:"\u786e\u8ba4\u5220\u9664\uff1f"}),(0,g.jsx)(k,{onSuccess:function(){L(!1),K()},open:A,onClose:function(){return L(!1)}})]})}}}]);
//# sourceMappingURL=446.85d574f5.chunk.js.map