"use strict";(self.webpackChunkmonitor_admin=self.webpackChunkmonitor_admin||[]).push([[896],{3896:function(e,n,r){r.r(n),r.d(n,{default:function(){return S}});var t=r(4165),a=r(5861),s=r(9439),i=r(2584),l=r(9286),u=r(1046),o=r(2266),c=r(7309),d=r(7027),h=r(3218),p=r(3920),x=r(4123),Z=r(2791),m=r(7846),f=r(7828),j=r(9389),v=r(4424),w=r(4941),I=r(6430),b=I.Z;b.Dragger=w.Z,b.LIST_IGNORE=I.E;var g=b,k=r(732),C=r(3329),y=function(e){return new Promise((function(n,r){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return n(t.result)},t.onerror=function(e){return r(e)}}))},P=function(e){var n=m.Z.useForm(),r=(0,s.Z)(n,1)[0],o=(0,Z.useState)(""),h=(0,s.Z)(o,2),p=h[0],w=h[1],I=(0,Z.useState)(!1),b=(0,s.Z)(I,2),P=b[0],S=b[1],N=(0,Z.useState)(""),z=(0,s.Z)(N,2),q=z[0],F=z[1],L=(0,Z.useState)(""),A=(0,s.Z)(L,2),E=A[0],T=A[1],O=function(){var n=(0,a.Z)((0,t.Z)().mark((function n(a){return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t={loginName:a.loginName,userName:a.userName,password:a.password,phonenumber:a.phonenumber,email:a.email,sex:a.sex,avatar:p,status:a.status,remark:a.remark},i.Z.post("users",t);case 3:r.resetFields(),d.ZP.success("\u521b\u5efa\u6210\u529f"),e.onSuccess(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}var t}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}(),R=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.url||n.preview){e.next=4;break}return e.next=3,y(n.originFileObj);case 3:n.preview=e.sent;case 4:F(n.url||n.preview),S(!0),T(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,C.jsxs)(f.Z,{title:"\u6dfb\u52a0\u7528\u6237",placement:"right",width:500,closable:!1,open:e.open,extra:(0,C.jsx)(u.Z,{children:(0,C.jsx)(k.Z,{onClick:e.onClose})}),children:[(0,C.jsxs)(m.Z,{labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",form:r,onFinish:O,initialValues:{sex:"0",status:"0"},children:[(0,C.jsx)(m.Z.Item,{label:"\u767b\u5f55\u540d",name:"loginName",rules:[{required:!0}],children:(0,C.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u767b\u5f55\u540d"})}),(0,C.jsx)(m.Z.Item,{label:"\u7528\u6237\u540d",name:"userName",rules:[{required:!0}],children:(0,C.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),(0,C.jsx)(m.Z.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0}],children:(0,C.jsx)(j.Z.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),(0,C.jsx)(m.Z.Item,{label:"\u786e\u8ba4\u5bc6\u7801",name:"repassword",rules:[{required:!0}],children:(0,C.jsx)(j.Z.Password,{placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801"})}),(0,C.jsx)(m.Z.Item,{label:"\u6027\u522b",name:"sex",rules:[{required:!0}],children:(0,C.jsxs)(v.ZP.Group,{children:[(0,C.jsx)(v.ZP,{value:"0",children:"\u7537"}),(0,C.jsx)(v.ZP,{value:"1",children:"\u5973"})]})}),(0,C.jsx)(m.Z.Item,{label:"\u90ae\u7bb1",name:"email",children:(0,C.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})}),(0,C.jsx)(m.Z.Item,{label:"\u624b\u673a\u53f7",name:"phonenumber",children:(0,C.jsx)(j.Z,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})}),(0,C.jsx)(m.Z.Item,{label:"\u72b6\u6001",name:"status",rules:[{required:!0}],children:(0,C.jsxs)(v.ZP.Group,{children:[(0,C.jsx)(v.ZP,{value:"0",children:"\u6b63\u5e38"}),(0,C.jsx)(v.ZP,{value:"1",children:"\u505c\u7528"})]})}),(0,C.jsx)(m.Z.Item,{label:"\u5934\u50cf",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},children:(0,C.jsx)(g,{onPreview:R,action:"http://localhost:3000/file/upload",listType:"picture-card",onChange:function(e){var n=e.file;e.fileList,e.event;"done"===n.status&&n.response&&200===n.response.code&&w(n.response.data.fileId)},maxCount:1,onRemove:function(){w("")},children:(0,C.jsx)(l.Z,{})})}),(0,C.jsx)(m.Z.Item,{name:"remark",label:"\u5907\u6ce8",children:(0,C.jsx)(j.Z.TextArea,{rows:4,showCount:!0,maxLength:100})}),(0,C.jsx)(m.Z.Item,{wrapperCol:{offset:6,span:18},children:(0,C.jsx)(c.ZP,{type:"primary",htmlType:"submit",children:"\u786e\u5b9a"})})]}),(0,C.jsx)(x.Z,{open:P,title:E,footer:null,onCancel:function(){return S(!1)},children:(0,C.jsx)("img",{alt:"example",style:{width:"100%"},src:q})})]})},S=function(){var e=(0,Z.useState)(1),n=(0,s.Z)(e,2),r=n[0],m=n[1],f=(0,Z.useState)(10),j=(0,s.Z)(f,2),v=j[0],w=j[1],I=(0,Z.useState)(0),b=(0,s.Z)(I,2),g=b[0],k=b[1],y=(0,Z.useState)([]),S=(0,s.Z)(y,2),N=S[0],z=S[1],q=(0,Z.useState)(!1),F=(0,s.Z)(q,2),L=F[0],A=F[1],E=(0,Z.useState)(!1),T=(0,s.Z)(E,2),O=T[0],R=T[1],G=(0,Z.useState)(""),_=(0,s.Z)(G,2),D=_[0],V=_[1],K=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t={pageNum:r,pageSize:v},i.Z.get("users",t);case 2:(n=e.sent).data&&(k(n.data.total),z(n.data.data));case 4:case"end":return e.stop()}var t}),e)})));return function(){return e.apply(this,arguments)}}();(0,Z.useEffect)((function(){K()}),[]),(0,Z.useEffect)((function(){K()}),[r,v]);var U=[{title:"\u767b\u5f55\u540d",dataIndex:"loginName",width:100},{title:"\u7528\u6237\u540d",dataIndex:"userName",width:100},{title:"\u6027\u522b",dataIndex:"sex",width:50,render:function(e,n){return(0,C.jsx)(u.Z,{size:"middle",children:"0"===n.sex?"\u7537":"\u5973"})}},{title:"\u90ae\u7bb1",dataIndex:"email",width:100},{title:"\u624b\u673a\u53f7",dataIndex:"phonenumber",width:100},{title:"\u72b6\u6001",dataIndex:"status",width:50,render:function(e,n){return(0,C.jsx)(u.Z,{size:"middle",children:"0"===n.status?"\u6b63\u5e38":"\u505c\u7528"})}},{title:"\u5934\u50cf",dataIndex:"avatar",width:100,render:function(e,n){return(0,C.jsx)(u.Z,{size:"middle",children:n.avatar?(0,C.jsx)(o.C,{src:n.avatar.url}):""})}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",width:100},{title:"\u64cd\u4f5c",width:100,render:function(e,n){return(0,C.jsxs)(u.Z,{size:"middle",children:[(0,C.jsx)(c.ZP,{type:"link",children:"\u4fee\u6539"}),(0,C.jsx)(c.ZP,{type:"link",danger:!0,onClick:function(e){V(n.userId),R(!0)},children:"\u5220\u9664"})]})}}],B=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!1),e.next=3,n=D,i.Z.delete("users/".concat(n));case 3:200===e.sent.code&&(d.ZP.success("\u5220\u9664\u6210\u529f"),K());case 5:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),H={showSizeChanger:!0,onChange:function(e,n){m(e),w(n)},defaultCurrent:r,total:g};return(0,C.jsxs)("div",{children:[(0,C.jsx)(h.Z,{children:(0,C.jsx)(c.ZP,{type:"primary",icon:(0,C.jsx)(l.Z,{}),onClick:function(e){return A(!0)},children:"\u65b0\u589e\u7528\u6237"})}),(0,C.jsx)(h.Z,{title:"\u7528\u6237\u5217\u8868",style:{marginTop:"20px"},children:(0,C.jsx)(p.Z,{rowKey:function(e){return e.userId},pagination:H,columns:U,dataSource:N})}),(0,C.jsx)(x.Z,{title:"\u63d0\u793a!",open:O,onOk:B,onCancel:function(){R(!1)},children:"\u786e\u8ba4\u5220\u9664\uff1f"}),(0,C.jsx)(P,{onSuccess:function(){A(!1),K()},open:L,onClose:function(){return A(!1)}})]})}}}]);
//# sourceMappingURL=896.c54bd6b3.chunk.js.map