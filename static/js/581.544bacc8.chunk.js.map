{"version":3,"file":"static/js/581.544bacc8.chunk.js","mappings":"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","sources":["api/modules/app.ts","api/modules/web/sourcemap.ts","utils/util.ts","views/web/js/sourcemap/addSourcemap/index.tsx","views/web/js/sourcemap/index.tsx","../node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","../node_modules/@ant-design/icons/es/icons/InboxOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","../node_modules/@ant-design/icons/es/icons/UploadOutlined.js"],"sourcesContent":["import http from \"../index\"\nimport { ReqPage, ResPage } from \"../interface\";\nimport { App } from \"../interface/app\";\n\n// 新增应用\nexport const addApp = (params: App.CreateAppForm) => {\n    return http.post<App.ResApp>('app', params);\n};\n\n// 获取应用列表\nexport const getAppList = (params: ReqPage) => {\n    return http.get<ResPage<App.ResApp>>('app', params);\n};\n\n// 删除单个应用\nexport const deleteApp = (id: string) => {\n    return http.delete<App.ResApp>(`app/${id}`);\n};\n\n// 获取应用信息\nexport const getAppInfo = (appId: string) => {\n    return http.get<App.ResApp>(`app/${appId}`);\n};","import { Sourcemap } from \"@/api/interface/web/sourcemap\";\nimport http from \"../../index\"\nimport { ReqPage, ResPage } from \"../../interface\";\n\n// 获取sourcemap列表\nexport const getSourcemapList = (params: ReqPage) => {\n    return http.get<ResPage<Sourcemap.ResSourcemap>>('web/sourcemap', params);\n};\n\n// 新增sourcemap信息\nexport const addSourcemap = (params: Sourcemap.CreateSourcemap) => {\n    return http.post<ResPage<Sourcemap.ResSourcemap>>('web/sourcemap', params);\n};\n\n// 获取sourcemap\nexport const getSourcemap = (id: string) => {\n    return http.get<Sourcemap.ResSourcemap>(`web/sourcemap/${id}`);\n};","import { MenuItem } from \"@/layout/components/SiderMenu\";\n\n/**\n* @description 递归当前路由的 所有 关联的路由，生成面包屑导航栏\n* @param {String} path 当前访问地址\n* @param {Array} menuList 菜单列表\n* @returns array\n*/\nexport const getBreadcrumbList = (path: string, menuList: MenuItem[]) => {\n\tlet tempPath: any[] = [];\n\ttry {\n\t\tconst getNodePath = (node: MenuItem) => {\n\t\t\ttempPath.push(node);\n\t\t\t// 找到符合条件的节点，通过throw终止掉递归\n\t\t\tif (node?.key === path) {\n\t\t\t\tthrow new Error(\"GOT IT!\");\n\t\t\t}\n\t\t\tif (node?.['children'] && node?.['children'].length > 0) {\n\t\t\t\tfor (let i = 0; i < node?.['children'].length; i++) {\n\t\t\t\t\tgetNodePath(node['children'][i]);\n\t\t\t\t}\n\t\t\t\t// 当前节点的子节点遍历完依旧没找到，则删除路径中的该节点\n\t\t\t\ttempPath.pop();\n\t\t\t} else {\n\t\t\t\t// 找到叶子节点时，删除路径当中的该叶子节点\n\t\t\t\ttempPath.pop();\n\t\t\t}\n\t\t};\n\t\tfor (let i = 0; i < menuList.length; i++) {\n\t\t\tgetNodePath(menuList[i]);\n\t\t}\n\t\treturn [];\n\t} catch (e) {\n\t\treturn tempPath.map(item => item.label) as string[];\n\t}\n};\n\nexport function download(filename: string, content: string) {\n\tconst arraybuffer = new TextEncoder().encode(content).buffer;\n\tconst blob = new Blob([arraybuffer], { type: 'text/plain;charset=utf-8' });\n\tconst reader = new FileReader();\n\treader.readAsDataURL(blob);\n\treader.onload = (event: any) => {\n\t\tconst element: any = document.createElement('a');\n\t\telement.href = event.target.result;\n\t\telement.download = filename;\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t};\n}","import { addSourcemap } from \"@/api/modules/web/sourcemap\";\nimport { CloseOutlined, InboxOutlined } from \"@ant-design/icons\";\nimport { Button, Drawer, Form, Input, Select, Space, UploadFile, UploadProps, message } from \"antd\";\nimport Dragger from \"antd/es/upload/Dragger\";\nimport { useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\ninterface Props {\n    open: boolean;\n    onSuccess: () => void;\n    onClose: () => void\n}\n\nconst AddSourcemapPage: React.FC<Props> = (props: Props) => {\n    const [form] = Form.useForm();\n    const [fileList, setFileList] = useState<UploadFile[]>([]);\n    const [sourcemap, setSourcemap] = useState<string>('');\n    const [searchParams] = useSearchParams();\n    const [messageApi, contextHolder] = message.useMessage();\n\n    const onFinish = async (values: any) => {\n        const appId = searchParams.get('appId');\n        if (!appId) {\n            messageApi.open({\n                type: 'error',\n                content: 'appId不能为空!',\n            });\n            return;\n        }\n        try {\n            await addSourcemap({\n                filename: values.name,\n                sourcemap: sourcemap,\n                site_type: 'web',\n                appId: appId,\n                release: values.release\n            });\n            //清空form\n            form.resetFields();\n            message.success(\"创建成功\");\n            props.onSuccess();\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    const uploadProps: UploadProps = {\n        accept: '.js.map',\n        multiple: false,\n        maxCount: 1,\n        onRemove: (file) => {\n            const index = fileList.indexOf(file);\n            const newFileList = fileList.slice();\n            newFileList.splice(index, 1);\n            setFileList(newFileList);\n        },\n        beforeUpload: (file) => {\n            const reader = new FileReader();\n            // result 属性中将包含一个字符串以表示所读取的文件内容。\n            reader.readAsBinaryString(file);\n            reader.onload = function () {\n                setSourcemap(this.result as string);\n            }\n            setFileList([...fileList, file]);\n            return false;\n        },\n        fileList,\n    };\n\n    const onChange = (value: string) => {\n        console.log(`selected ${value}`);\n    };\n\n    const onSearch = (value: string) => {\n        console.log('search:', value);\n    };\n\n    const normFile = (e: any) => {\n        if (Array.isArray(e)) {\n            return e;\n        }\n        return e?.fileList;\n    };\n\n    return (\n        <Drawer\n            title=\"上传SourceMap\"\n            placement='right'\n            width={500}\n            closable={false}\n            open={props.open}\n            extra={\n                <Space>\n                    <CloseOutlined onClick={props.onClose} />\n                </Space>\n            }\n        >\n            {contextHolder}\n            <Form\n                layout=\"vertical\"\n                form={form}\n                onFinish={onFinish}\n                initialValues={{ type: 1 }}\n            >\n                <Form.Item label=\"js sourcemap文件名\" name=\"name\" rules={[{ required: true }]}>\n                    <Input />\n                </Form.Item>\n                <Form.Item label=\"上传 Sourcemap 文件\" name=\"dragger\" rules={[{ required: true }]}>\n                    <Form.Item name=\"dragger\" valuePropName=\"fileList\" getValueFromEvent={normFile} noStyle>\n                        <Dragger {...uploadProps}>\n                            <p className=\"ant-upload-drag-icon\">\n                                <InboxOutlined />\n                            </p>\n                            <p className=\"ant-upload-text\">点击或拖拽文件到此处上传</p>\n                            <p className=\"ant-upload-hint\">\n                                只支持.js.map文件\n                            </p>\n                        </Dragger>\n                    </Form.Item>\n                </Form.Item>\n                <Form.Item label=\"Release\" name=\"release\" rules={[{ required: true }]}>\n                    <Select\n                        showSearch\n                        allowClear\n                        placeholder=\"选择或输入对应版本\"\n                        optionFilterProp=\"children\"\n                        onChange={onChange}\n                        onSearch={onSearch}\n                        filterOption={(input, option) =>\n                            (option?.label ?? '').toLowerCase().includes(input.toLowerCase())\n                        }\n                        options={[\n                            {\n                                value: 'jack',\n                                label: 'Jack',\n                            },\n                            {\n                                value: 'lucy',\n                                label: 'Lucy',\n                            },\n                            {\n                                value: 'tom',\n                                label: 'Tom',\n                            },\n                        ]}\n                    />\n                </Form.Item>\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\">\n                        确定\n                    </Button>\n                </Form.Item>\n            </Form>\n        </Drawer>\n    );\n}\n\nexport default AddSourcemapPage;","import { getAppInfo } from \"@/api/modules/app\";\nimport { CopyOutlined, UploadOutlined } from \"@ant-design/icons\";\nimport { Button, Card, Space, Table, message } from \"antd\";\nimport { ColumnsType } from \"antd/es/table\";\nimport Title from \"antd/es/typography/Title\";\nimport copy from 'copy-to-clipboard';\nimport { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport AddSourcemapPage from \"./addSourcemap\";\nimport { getSourcemap, getSourcemapList } from \"@/api/modules/web/sourcemap\";\nimport { download } from \"@/utils/util\";\n\ninterface DataType {\n    key: React.Key;\n    filename: string;\n    release: string;\n    filesize: number;\n    createdAt: string;\n}\n\nconst SourceMapManage = () => {\n    const [key, setKey] = useState<string>('');\n    const [token, setToken] = useState<string>('');\n    const [pageNum, setPageNum] = useState(1);\n    const [pageSize, setPageSize] = useState(10);\n    const [sourcemapTotal, setSourcemapTotal] = useState(0);\n    const [sourcemapList, setSourcemapList] = useState<DataType[]>([]);\n    const [searchParams] = useSearchParams();\n    const [showCreatePage, setShowCreatePage] = useState(false);\n\n    const initAppInfo = async () => {\n        const appId = searchParams.get('appId');\n        if (appId) {\n            const appInfo = await getAppInfo(appId);\n            if (appInfo && appInfo.code === 200) {\n                setKey(appInfo.data!.apiKey);\n                setToken(appInfo.data!.apiSecret);\n            }\n        }\n    }\n\n    useEffect(() => {\n        initAppInfo();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const copyText = (e: React.MouseEvent, text: string) => {\n        e.stopPropagation();\n        copy(text);\n        message.success('已复制')\n    }\n\n    const columns: ColumnsType<DataType> = [\n        {\n            title: '文件名',\n            dataIndex: 'filename',\n            width: 50,\n        },\n        {\n            title: 'release',\n            dataIndex: 'release',\n            width: 100,\n        },\n        {\n            title: '文件大小',\n            dataIndex: 'filesize',\n            width: 50,\n        },\n        {\n            title: '上传时间',\n            dataIndex: 'createdAt',\n            width: 100,\n        },\n        {\n            title: '操作',\n            width: 100,\n            render: (_, record) => (\n                <Space size=\"middle\">\n                    <Button type=\"link\" onClick={(e) => downloadSourceMap(e, record.key.toString())}>下载 Sourcemap</Button>\n                </Space>\n            ),\n        },\n    ];\n\n    const downloadSourceMap = async (e: React.MouseEvent, smId: string) => {\n        const result = await getSourcemap(smId);\n        if (result.data) {\n            download(`${result.data.filename}.js.map`, result.data.sourcemap);\n        }\n    }\n\n    const initSourcemapList = async () => {\n        const result = await getSourcemapList({ pageNum, pageSize });\n        if (result.data) {\n            setSourcemapTotal(result.data.total);\n            const data: DataType[] = [];\n            result.data.data.forEach(item => {\n                data.push({\n                    key: item.smId,\n                    release: item.release,\n                    createdAt: item.createdAt,\n                    filename: item.filename,\n                    filesize: item.filesize,\n                })\n            });\n            setSourcemapList(data);\n        }\n    };\n\n    useEffect(() => {\n        initSourcemapList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        initSourcemapList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [pageNum, pageSize]);\n\n    const pagination = {\n        showSizeChanger: true,\n        onChange: (page: number, pageSize: number) => {\n            setPageNum(page);\n            setPageSize(pageSize);\n        },\n        defaultCurrent: pageNum,\n        total: sourcemapTotal\n    }\n\n    return (<div>\n        <div style={{ background: '#ffffff', padding: '12px 16px' }}>\n            <Title level={5}>自动上传密钥</Title>\n            <div>\n                <span><span style={{ color: '#86909c' }}>API Key:</span>&nbsp;&nbsp;{key} <CopyOutlined style={{ marginLeft: '8px' }} onClick={(e) => copyText(e, key)} /></span> <span style={{ marginLeft: '16px' }}> <span style={{ color: '#86909c' }}>API Token:</span>&nbsp;&nbsp;{token} <CopyOutlined style={{ marginLeft: '8px' }} onClick={(e) => copyText(e, token)} /></span>\n            </div>\n        </div>\n        <Card title=\"sourcemap列表\" style={{ marginTop: '20px' }}>\n            <Button type=\"primary\" icon={<UploadOutlined />} onClick={e => setShowCreatePage(true)}>\n                上传Sourcemap\n            </Button>\n            <Table style={{ marginTop: '12px' }} pagination={pagination} columns={columns} dataSource={sourcemapList} />\n        </Card>\n        <AddSourcemapPage onSuccess={() => { setShowCreatePage(false); initSourcemapList(); }} open={showCreatePage} onClose={() => setShowCreatePage(false)}></AddSourcemapPage>\n    </div>);\n}\n\nexport default SourceMapManage;","// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  InboxOutlined.displayName = 'InboxOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(InboxOutlined);","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar UploadOutlined = function UploadOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: UploadOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  UploadOutlined.displayName = 'UploadOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(UploadOutlined);"],"names":["addApp","params","http","post","getAppList","get","deleteApp","id","delete","concat","getAppInfo","appId","getSourcemapList","addSourcemap","getSourcemap","getBreadcrumbList","path","menuList","tempPath","getNodePath","node","push","key","Error","length","i","pop","e","map","item","label","download","filename","content","arraybuffer","TextEncoder","encode","buffer","blob","Blob","type","reader","FileReader","readAsDataURL","onload","event","element","document","createElement","href","target","result","body","appendChild","click","removeChild","props","form","Form","useForm","fileList","setFileList","useState","sourcemap","setSourcemap","searchParams","useSearchParams","messageApi","contextHolder","message","useMessage","uploadProps","accept","multiple","maxCount","onRemove","file","index","indexOf","newFileList","slice","splice","beforeUpload","readAsBinaryString","this","_jsxs","Drawer","title","placement","width","closable","open","extra","_jsx","Space","children","CloseOutlined","onClick","onClose","layout","onFinish","async","values","name","site_type","release","resetFields","success","onSuccess","error","console","log","initialValues","Item","rules","required","Input","valuePropName","getValueFromEvent","Array","isArray","noStyle","Dragger","className","InboxOutlined","Select","showSearch","allowClear","placeholder","optionFilterProp","onChange","value","onSearch","filterOption","input","option","_option$label","toLowerCase","includes","options","Button","htmlType","SourceMapManage","setKey","token","setToken","pageNum","setPageNum","pageSize","setPageSize","sourcemapTotal","setSourcemapTotal","sourcemapList","setSourcemapList","showCreatePage","setShowCreatePage","useEffect","appInfo","code","data","apiKey","apiSecret","initAppInfo","copyText","text","stopPropagation","copy","columns","dataIndex","render","_","record","size","downloadSourceMap","toString","smId","initSourcemapList","total","forEach","createdAt","filesize","pagination","showSizeChanger","page","defaultCurrent","style","background","padding","Title","level","color","CopyOutlined","marginLeft","Card","marginTop","icon","UploadOutlined","Table","dataSource","AddSourcemapPage","ref","React","AntdIcon","_extends","InboxOutlinedSvg","UploadOutlinedSvg"],"sourceRoot":""}