{"version":3,"file":"static/js/289.3d3ba717.chunk.js","mappings":"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","sources":["api/modules/web/sourcemap.ts","utils/util.ts","views/miniapp/js/sourcemap/addSourcemap/index.tsx","views/miniapp/js/sourcemap/index.tsx","../node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","../node_modules/@ant-design/icons/es/icons/InboxOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","../node_modules/@ant-design/icons/es/icons/UploadOutlined.js"],"sourcesContent":["import { Sourcemap } from \"@/api/interface/web/sourcemap\";\nimport http from \"../../index\"\nimport { ReqPage, ResPage } from \"../../interface\";\n\n// 获取sourcemap列表\nexport const getSourcemapList = (params: ReqPage) => {\n    return http.get<ResPage<Sourcemap.ResSourcemap>>('web/sourcemap', params);\n};\n\n// 新增sourcemap信息\nexport const addSourcemap = (params: Sourcemap.CreateSourcemap) => {\n    return http.post<ResPage<Sourcemap.ResSourcemap>>('web/sourcemap', params);\n};\n\n// 获取sourcemap\nexport const getSourcemap = (id: string) => {\n    return http.get<Sourcemap.ResSourcemap>(`web/sourcemap/${id}`);\n};","import { MenuItem } from \"@/layout/components/SiderMenu\";\n\n/**\n* @description 递归当前路由的 所有 关联的路由，生成面包屑导航栏\n* @param {String} path 当前访问地址\n* @param {Array} menuList 菜单列表\n* @returns array\n*/\nexport const getBreadcrumbList = (path: string, menuList: MenuItem[]) => {\n\tlet tempPath: any[] = [];\n\ttry {\n\t\tconst getNodePath = (node: MenuItem) => {\n\t\t\ttempPath.push(node);\n\t\t\t// 找到符合条件的节点，通过throw终止掉递归\n\t\t\tif (node?.key === path) {\n\t\t\t\tthrow new Error(\"GOT IT!\");\n\t\t\t}\n\t\t\tif (node?.['children'] && node?.['children'].length > 0) {\n\t\t\t\tfor (let i = 0; i < node?.['children'].length; i++) {\n\t\t\t\t\tgetNodePath(node['children'][i]);\n\t\t\t\t}\n\t\t\t\t// 当前节点的子节点遍历完依旧没找到，则删除路径中的该节点\n\t\t\t\ttempPath.pop();\n\t\t\t} else {\n\t\t\t\t// 找到叶子节点时，删除路径当中的该叶子节点\n\t\t\t\ttempPath.pop();\n\t\t\t}\n\t\t};\n\t\tfor (let i = 0; i < menuList.length; i++) {\n\t\t\tgetNodePath(menuList[i]);\n\t\t}\n\t\treturn [];\n\t} catch (e) {\n\t\treturn tempPath.map(item => item.label) as string[];\n\t}\n};\n\nexport function download(filename: string, content: string) {\n\tconst arraybuffer = new TextEncoder().encode(content).buffer;\n\tconst blob = new Blob([arraybuffer], { type: 'text/plain;charset=utf-8' });\n\tconst reader = new FileReader();\n\treader.readAsDataURL(blob);\n\treader.onload = (event: any) => {\n\t\tconst element: any = document.createElement('a');\n\t\telement.href = event.target.result;\n\t\telement.download = filename;\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t};\n}","import { addSourcemap } from \"@/api/modules/web/sourcemap\";\nimport { CloseOutlined, InboxOutlined } from \"@ant-design/icons\";\nimport { Button, Drawer, Form, Input, Select, Space, UploadFile, UploadProps, message } from \"antd\";\nimport Dragger from \"antd/es/upload/Dragger\";\nimport { useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\ninterface Props {\n    open: boolean;\n    onSuccess: () => void;\n    onClose: () => void\n}\n\nconst AddSourcemapPage: React.FC<Props> = (props: Props) => {\n    const [form] = Form.useForm();\n    const [fileList, setFileList] = useState<UploadFile[]>([]);\n    const [sourcemap, setSourcemap] = useState<string>('');\n    const [searchParams] = useSearchParams();\n    const [messageApi, contextHolder] = message.useMessage();\n\n    const onFinish = async (values: any) => {\n        const appId = searchParams.get('appId');\n        if (!appId) {\n            messageApi.open({\n                type: 'error',\n                content: 'appId不能为空!',\n            });\n            return;\n        }\n        try {\n            await addSourcemap({\n                filename: values.name,\n                sourcemap: sourcemap,\n                site_type: 'web',\n                appId: appId,\n                release: values.release\n            });\n            //清空form\n            form.resetFields();\n            message.success(\"创建成功\");\n            props.onSuccess();\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    const uploadProps: UploadProps = {\n        accept: '.js.map',\n        multiple: false,\n        maxCount: 1,\n        onRemove: (file) => {\n            const index = fileList.indexOf(file);\n            const newFileList = fileList.slice();\n            newFileList.splice(index, 1);\n            setFileList(newFileList);\n        },\n        beforeUpload: (file) => {\n            const reader = new FileReader();\n            // result 属性中将包含一个字符串以表示所读取的文件内容。\n            reader.readAsBinaryString(file);\n            reader.onload = function () {\n                setSourcemap(this.result as string);\n            }\n            setFileList([...fileList, file]);\n            return false;\n        },\n        fileList,\n    };\n\n    const onChange = (value: string) => {\n        console.log(`selected ${value}`);\n    };\n\n    const onSearch = (value: string) => {\n        console.log('search:', value);\n    };\n\n    const normFile = (e: any) => {\n        if (Array.isArray(e)) {\n            return e;\n        }\n        return e?.fileList;\n    };\n\n    return (\n        <Drawer\n            title=\"上传SourceMap\"\n            placement='right'\n            width={500}\n            closable={false}\n            open={props.open}\n            extra={\n                <Space>\n                    <CloseOutlined onClick={props.onClose} />\n                </Space>\n            }\n        >\n            {contextHolder}\n            <Form\n                layout=\"vertical\"\n                form={form}\n                onFinish={onFinish}\n                initialValues={{ type: 1 }}\n            >\n                <Form.Item label=\"js sourcemap文件名\" name=\"name\" rules={[{ required: true }]}>\n                    <Input />\n                </Form.Item>\n                <Form.Item label=\"上传 Sourcemap 文件\" name=\"dragger\" rules={[{ required: true }]}>\n                    <Form.Item name=\"dragger\" valuePropName=\"fileList\" getValueFromEvent={normFile} noStyle>\n                        <Dragger {...uploadProps}>\n                            <p className=\"ant-upload-drag-icon\">\n                                <InboxOutlined />\n                            </p>\n                            <p className=\"ant-upload-text\">点击或拖拽文件到此处上传</p>\n                            <p className=\"ant-upload-hint\">\n                                只支持.js.map文件\n                            </p>\n                        </Dragger>\n                    </Form.Item>\n                </Form.Item>\n                <Form.Item label=\"Release\" name=\"release\" rules={[{ required: true }]}>\n                    <Select\n                        showSearch\n                        allowClear\n                        placeholder=\"选择或输入对应版本\"\n                        optionFilterProp=\"children\"\n                        onChange={onChange}\n                        onSearch={onSearch}\n                        filterOption={(input, option) =>\n                            (option?.label ?? '').toLowerCase().includes(input.toLowerCase())\n                        }\n                        options={[\n                            {\n                                value: 'jack',\n                                label: 'Jack',\n                            },\n                            {\n                                value: 'lucy',\n                                label: 'Lucy',\n                            },\n                            {\n                                value: 'tom',\n                                label: 'Tom',\n                            },\n                        ]}\n                    />\n                </Form.Item>\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\">\n                        确定\n                    </Button>\n                </Form.Item>\n            </Form>\n        </Drawer>\n    );\n}\n\nexport default AddSourcemapPage;","import { UploadOutlined } from \"@ant-design/icons\";\nimport { Button, Card, Space, Table } from \"antd\";\nimport { ColumnsType } from \"antd/es/table\";\nimport { useEffect, useState } from \"react\";\nimport AddSourcemapPage from \"./addSourcemap\";\nimport { getSourcemap, getSourcemapList } from \"@/api/modules/web/sourcemap\";\nimport { download } from \"@/utils/util\";\n\ninterface DataType {\n    key: React.Key;\n    filename: string;\n    release: string;\n    filesize: number;\n    createdAt: string;\n}\n\nconst SourceMapManage = () => {\n    const [pageNum, setPageNum] = useState(1);\n    const [pageSize, setPageSize] = useState(10);\n    const [sourcemapTotal, setSourcemapTotal] = useState(0);\n    const [sourcemapList, setSourcemapList] = useState<DataType[]>([]);\n    const [showCreatePage, setShowCreatePage] = useState(false);\n\n    const columns: ColumnsType<DataType> = [\n        {\n            title: '文件名',\n            dataIndex: 'filename',\n            width: 50,\n        },\n        {\n            title: 'release',\n            dataIndex: 'release',\n            width: 100,\n        },\n        {\n            title: '文件大小',\n            dataIndex: 'filesize',\n            width: 50,\n        },\n        {\n            title: '上传时间',\n            dataIndex: 'createdAt',\n            width: 100,\n        },\n        {\n            title: '操作',\n            width: 100,\n            render: (_, record) => (\n                <Space size=\"middle\">\n                    <Button type=\"link\" onClick={(e) => downloadSourceMap(e, record.key.toString())}>下载 Sourcemap</Button>\n                </Space>\n            ),\n        },\n    ];\n\n    const downloadSourceMap = async (e: React.MouseEvent, smId: string) => {\n        const result = await getSourcemap(smId);\n        if (result.data) {\n            download(`${result.data.filename}.js.map`, result.data.sourcemap);\n        }\n    }\n\n    const initSourcemapList = async () => {\n        const result = await getSourcemapList({ pageNum, pageSize });\n        if (result.data) {\n            setSourcemapTotal(result.data.total);\n            const data: DataType[] = [];\n            result.data.data.forEach(item => {\n                data.push({\n                    key: item.smId,\n                    release: item.release,\n                    createdAt: item.createdAt,\n                    filename: item.filename,\n                    filesize: item.filesize,\n                })\n            });\n            setSourcemapList(data);\n        }\n    };\n\n    useEffect(() => {\n        initSourcemapList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        initSourcemapList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [pageNum, pageSize]);\n\n    const pagination = {\n        showSizeChanger: true,\n        onChange: (page: number, pageSize: number) => {\n            setPageNum(page);\n            setPageSize(pageSize);\n        },\n        defaultCurrent: pageNum,\n        total: sourcemapTotal\n    }\n\n    return (<div>\n        <Card title=\"sourcemap列表\" style={{ marginTop: '20px' }}>\n            <Button type=\"primary\" icon={<UploadOutlined />} onClick={e => setShowCreatePage(true)}>\n                上传Sourcemap\n            </Button>\n            <Table style={{ marginTop: '12px' }} pagination={pagination} columns={columns} dataSource={sourcemapList} />\n        </Card>\n        <AddSourcemapPage onSuccess={() => { setShowCreatePage(false); initSourcemapList(); }} open={showCreatePage} onClose={() => setShowCreatePage(false)}></AddSourcemapPage>\n    </div>);\n}\n\nexport default SourceMapManage;","// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  InboxOutlined.displayName = 'InboxOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(InboxOutlined);","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar UploadOutlined = function UploadOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: UploadOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  UploadOutlined.displayName = 'UploadOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(UploadOutlined);"],"names":["getSourcemapList","params","http","get","addSourcemap","post","getSourcemap","id","concat","getBreadcrumbList","path","menuList","tempPath","getNodePath","node","push","key","Error","length","i","pop","e","map","item","label","download","filename","content","arraybuffer","TextEncoder","encode","buffer","blob","Blob","type","reader","FileReader","readAsDataURL","onload","event","element","document","createElement","href","target","result","body","appendChild","click","removeChild","props","_Form$useForm","Form","useForm","form","_slicedToArray","_useState","useState","_useState2","fileList","setFileList","_useState3","_useState4","sourcemap","setSourcemap","_useSearchParams","useSearchParams","searchParams","_message$useMessage","message","useMessage","_message$useMessage2","messageApi","contextHolder","onFinish","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","appId","wrap","_context","prev","next","open","abrupt","name","site_type","release","resetFields","success","onSuccess","t0","console","log","stop","_x","apply","arguments","uploadProps","accept","multiple","maxCount","onRemove","file","index","indexOf","newFileList","slice","splice","beforeUpload","readAsBinaryString","this","_toConsumableArray","_jsxs","Drawer","title","placement","width","closable","extra","_jsx","Space","children","CloseOutlined","onClick","onClose","layout","initialValues","Item","rules","required","Input","valuePropName","getValueFromEvent","Array","isArray","noStyle","Dragger","_objectSpread","className","InboxOutlined","Select","showSearch","allowClear","placeholder","optionFilterProp","onChange","value","onSearch","filterOption","input","option","_option$label","toLowerCase","includes","options","Button","htmlType","pageNum","setPageNum","pageSize","setPageSize","_useState5","_useState6","sourcemapTotal","setSourcemapTotal","_useState7","_useState8","sourcemapList","setSourcemapList","_useState9","_useState10","showCreatePage","setShowCreatePage","columns","dataIndex","render","_","record","size","downloadSourceMap","toString","smId","sent","data","_x2","initSourcemapList","_ref2","_callee2","_context2","total","forEach","createdAt","filesize","useEffect","pagination","showSizeChanger","page","defaultCurrent","Card","style","marginTop","icon","UploadOutlined","Table","dataSource","AddSourcemapPage","ref","React","AntdIcon","_extends","InboxOutlinedSvg","UploadOutlinedSvg"],"sourceRoot":""}