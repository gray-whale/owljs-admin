"use strict";(self.webpackChunkmonitor_admin=self.webpackChunkmonitor_admin||[]).push([[82],{3552:function(e,n,t){t.d(n,{BN:function(){return o},L5:function(){return a},P2:function(){return i},yk:function(){return c}});var r=t(2584),a=function(e){return r.Z.post("app",e)},c=function(e){return r.Z.get("app",e)},i=function(e){return r.Z.delete("app/".concat(e))},o=function(e){return r.Z.get("app/".concat(e))}},1172:function(e,n,t){t.d(n,{L:function(){return a},U:function(){return r}});var r=function(e,n){var t=[];try{for(var r=function n(r){if(t.push(r),(null===r||void 0===r?void 0:r.key)===e)throw new Error("GOT IT!");if(null!==r&&void 0!==r&&r.children&&(null===r||void 0===r?void 0:r.children.length)>0){for(var a=0;a<(null===r||void 0===r?void 0:r.children.length);a++)n(r.children[a]);t.pop()}else t.pop()},a=0;a<n.length;a++)r(n[a]);return[]}catch(c){return t.map((function(e){return e.label}))}};function a(e,n){var t=(new TextEncoder).encode(n).buffer,r=new Blob([t],{type:"text/plain;charset=utf-8"}),a=new FileReader;a.readAsDataURL(r),a.onload=function(n){var t=document.createElement("a");t.href=n.target.result,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},5082:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var r=t(4165),a=t(5861),c=t(9439),i=t(3552),o=t(3414),l=t(7462),s=t(2791),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},d=t(4291),p=function(e,n){return s.createElement(d.Z,(0,l.Z)({},e,{ref:n,icon:u}))};var f=s.forwardRef(p),h=t(7027),m=t(1046),x=t(7309),v=t(3218),Z=t(3920),g=t(2499),j=t(6998),y=t.n(j),w=t(1087),b=t(1413),k=t(3433),S=t(2584),C=t(732),I={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"},L=function(e,n){return s.createElement(d.Z,(0,l.Z)({},e,{ref:n,icon:I}))};var P=s.forwardRef(L),z=t(7846),E=t(7828),V=t(9389),A=t(9555),T=t(4941),F=t(3329),N=function(e){var n=z.Z.useForm(),t=(0,c.Z)(n,1)[0],i=(0,s.useState)([]),o=(0,c.Z)(i,2),l=o[0],u=o[1],d=(0,s.useState)(""),p=(0,c.Z)(d,2),f=p[0],v=p[1],Z=(0,w.lr)(),g=(0,c.Z)(Z,1)[0],j=h.ZP.useMessage(),y=(0,c.Z)(j,2),I=y[0],L=y[1],N=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(a){var c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=g.get("appId")){n.next=4;break}return I.open({type:"error",content:"appId\u4e0d\u80fd\u4e3a\u7a7a!"}),n.abrupt("return");case 4:return n.prev=4,n.next=7,r={filename:a.name,sourcemap:f,site_type:"web",appId:c,release:a.release},S.Z.post("web/sourcemap",r);case 7:t.resetFields(),h.ZP.success("\u521b\u5efa\u6210\u529f"),e.onSuccess(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.log(n.t0);case 15:case"end":return n.stop()}var r}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}(),R={accept:".js.map",multiple:!1,maxCount:1,onRemove:function(e){var n=l.indexOf(e),t=l.slice();t.splice(n,1),u(t)},beforeUpload:function(e){var n=new FileReader;return n.readAsBinaryString(e),n.onload=function(){v(this.result)},u([].concat((0,k.Z)(l),[e])),!1},fileList:l};return(0,F.jsxs)(E.Z,{title:"\u4e0a\u4f20SourceMap",placement:"right",width:500,closable:!1,open:e.open,extra:(0,F.jsx)(m.Z,{children:(0,F.jsx)(C.Z,{onClick:e.onClose})}),children:[L,(0,F.jsxs)(z.Z,{layout:"vertical",form:t,onFinish:N,initialValues:{type:1},children:[(0,F.jsx)(z.Z.Item,{label:"js sourcemap\u6587\u4ef6\u540d",name:"name",rules:[{required:!0}],children:(0,F.jsx)(V.Z,{})}),(0,F.jsx)(z.Z.Item,{label:"\u4e0a\u4f20 Sourcemap \u6587\u4ef6",name:"dragger",rules:[{required:!0}],children:(0,F.jsx)(z.Z.Item,{name:"dragger",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList},noStyle:!0,children:(0,F.jsxs)(T.Z,(0,b.Z)((0,b.Z)({},R),{},{children:[(0,F.jsx)("p",{className:"ant-upload-drag-icon",children:(0,F.jsx)(P,{})}),(0,F.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904\u4e0a\u4f20"}),(0,F.jsx)("p",{className:"ant-upload-hint",children:"\u53ea\u652f\u6301.js.map\u6587\u4ef6"})]}))})}),(0,F.jsx)(z.Z.Item,{label:"Release",name:"release",rules:[{required:!0}],children:(0,F.jsx)(A.Z,{showSearch:!0,allowClear:!0,placeholder:"\u9009\u62e9\u6216\u8f93\u5165\u5bf9\u5e94\u7248\u672c",optionFilterProp:"children",onChange:function(e){console.log("selected ".concat(e))},onSearch:function(e){console.log("search:",e)},filterOption:function(e,n){var t;return(null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:[{value:"jack",label:"Jack"},{value:"lucy",label:"Lucy"},{value:"tom",label:"Tom"}]})}),(0,F.jsx)(z.Z.Item,{children:(0,F.jsx)(x.ZP,{type:"primary",htmlType:"submit",children:"\u786e\u5b9a"})})]})]})},R=t(1172),B=function(){var e=(0,s.useState)(""),n=(0,c.Z)(e,2),t=n[0],l=n[1],u=(0,s.useState)(""),d=(0,c.Z)(u,2),p=d[0],j=d[1],b=(0,s.useState)(1),k=(0,c.Z)(b,2),C=k[0],I=k[1],L=(0,s.useState)(10),P=(0,c.Z)(L,2),z=P[0],E=P[1],V=(0,s.useState)(0),A=(0,c.Z)(V,2),T=A[0],B=A[1],H=(0,s.useState)([]),M=(0,c.Z)(H,2),q=M[0],O=M[1],U=(0,w.lr)(),_=(0,c.Z)(U,1)[0],K=(0,s.useState)(!1),D=(0,c.Z)(K,2),G=D[0],J=D[1],Q=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=_.get("appId"))){e.next=6;break}return e.next=4,(0,i.BN)(n);case 4:(t=e.sent)&&200===t.code&&(l(t.data.apiKey),j(t.data.apiSecret));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){Q()}),[]);var W=function(e,n){e.stopPropagation(),y()(n),h.ZP.success("\u5df2\u590d\u5236")},X=[{title:"\u6587\u4ef6\u540d",dataIndex:"filename",width:50},{title:"release",dataIndex:"release",width:100},{title:"\u6587\u4ef6\u5927\u5c0f",dataIndex:"filesize",width:50},{title:"\u4e0a\u4f20\u65f6\u95f4",dataIndex:"createdAt",width:100},{title:"\u64cd\u4f5c",width:100,render:function(e,n){return(0,F.jsx)(m.Z,{size:"middle",children:(0,F.jsx)(x.ZP,{type:"link",onClick:function(e){return Y(e,n.key.toString())},children:"\u4e0b\u8f7d Sourcemap"})})}}],Y=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,S.Z.get("web/sourcemap/".concat(n));case 2:(a=e.sent).data&&(0,R.L)("".concat(a.data.filename,".js.map"),a.data.sourcemap);case 4:case"end":return e.stop()}var n}),e)})));return function(n,t){return e.apply(this,arguments)}}(),$=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r={pageNum:C,pageSize:z},S.Z.get("web/sourcemap",r);case 2:(n=e.sent).data&&(B(n.data.total),t=[],n.data.data.forEach((function(e){t.push({key:e.smId,release:e.release,createdAt:e.createdAt,filename:e.filename,filesize:e.filesize})})),O(t));case 4:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){$()}),[]),(0,s.useEffect)((function(){$()}),[C,z]);var ee={showSizeChanger:!0,onChange:function(e,n){I(e),E(n)},defaultCurrent:C,total:T};return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{style:{background:"#ffffff",padding:"12px 16px"},children:[(0,F.jsx)(g.Z,{level:5,children:"\u81ea\u52a8\u4e0a\u4f20\u5bc6\u94a5"}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("span",{children:[(0,F.jsx)("span",{style:{color:"#86909c"},children:"API Key:"}),"\xa0\xa0",t," ",(0,F.jsx)(o.Z,{style:{marginLeft:"8px"},onClick:function(e){return W(e,t)}})]})," ",(0,F.jsxs)("span",{style:{marginLeft:"16px"},children:[" ",(0,F.jsx)("span",{style:{color:"#86909c"},children:"API Token:"}),"\xa0\xa0",p," ",(0,F.jsx)(o.Z,{style:{marginLeft:"8px"},onClick:function(e){return W(e,p)}})]})]})]}),(0,F.jsxs)(v.Z,{title:"sourcemap\u5217\u8868",style:{marginTop:"20px"},children:[(0,F.jsx)(x.ZP,{type:"primary",icon:(0,F.jsx)(f,{}),onClick:function(e){return J(!0)},children:"\u4e0a\u4f20Sourcemap"}),(0,F.jsx)(Z.Z,{style:{marginTop:"12px"},pagination:ee,columns:X,dataSource:q})]}),(0,F.jsx)(N,{onSuccess:function(){J(!1),$()},open:G,onClose:function(){return J(!1)}})]})}}}]);
//# sourceMappingURL=82.ed3ccfb5.chunk.js.map