{"version":3,"file":"static/js/446.85d574f5.chunk.js","mappings":"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","sources":["views/system/user/components/createUserPage.tsx","api/modules/system/user.ts","views/system/user/index.tsx"],"sourcesContent":["import { Button, Drawer, Form, Input, Modal, Radio, Space, Upload, UploadFile, UploadProps, message } from \"antd\";\nimport { CloseOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { useState } from \"react\";\nimport { RcFile } from \"antd/es/upload\";\nimport { addUser } from \"@/api/modules/system/user\";\n\ninterface Props {\n\topen: boolean;\n\tonSuccess: () => void;\n\tonClose: () => void\n}\n\nconst getBase64 = (file: RcFile): Promise<string> =>\n\tnew Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(file);\n\t\treader.onload = () => resolve(reader.result as string);\n\t\treader.onerror = (error) => reject(error);\n\t});\n\nconst CreateUserPage = (props: Props) => {\n\tconst [form] = Form.useForm();\n\tconst [avatar, setAvatar] = useState('');\n\tconst [previewOpen, setPreviewOpen] = useState(false);\n\tconst [previewImage, setPreviewImage] = useState('');\n\tconst [previewTitle, setPreviewTitle] = useState('');\n\n\tconst onFinish = async (values: any) => {\n\t\tconsole.log('头像地址' + avatar);\n\t\ttry {\n\t\t\tawait addUser({\n\t\t\t\tloginName: values.loginName,\n\t\t\t\tuserName: values.userName,\n\t\t\t\tpassword: values.password,\n\t\t\t\tphonenumber: values.phonenumber,\n\t\t\t\temail: values.email,\n\t\t\t\tsex: values.sex,\n\t\t\t\tavatar: avatar,\n\t\t\t\tstatus: values.status,\n\t\t\t\tremark: values.remark\n\t\t\t});\n\t\t\t//清空form\n\t\t\tform.resetFields();\n\t\t\tmessage.success(\"创建成功\");\n\t\t\tprops.onSuccess();\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\tconst normFile = (e: any) => {\n\t\tif (Array.isArray(e)) {\n\t\t\treturn e;\n\t\t}\n\t\treturn e?.fileList;\n\t};\n\n\tconst onUploadChange: UploadProps['onChange'] = ({ file, fileList, event }: any) => {\n\t\tif (file.status === 'done') {\n\t\t\tconsole.log(file.response);\n\t\t\tif (file.response && file.response.code === 200) {\n\t\t\t\tsetAvatar(file.response.data.fileId);\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onRemove = () => {\n\t\tsetAvatar('');\n\t}\n\n\tconst handlePreview = async (file: UploadFile) => {\n\t\tif (!file.url && !file.preview) {\n\t\t\tfile.preview = await getBase64(file.originFileObj as RcFile);\n\t\t}\n\n\t\tsetPreviewImage(file.url || (file.preview as string));\n\t\tsetPreviewOpen(true);\n\t\tsetPreviewTitle(file.name || file.url!.substring(file.url!.lastIndexOf('/') + 1));\n\t};\n\n\tconst handleCancel = () => setPreviewOpen(false);\n\n\treturn (\n\t\t<Drawer\n\t\t\ttitle=\"添加用户\"\n\t\t\tplacement='right'\n\t\t\twidth={500}\n\t\t\tclosable={false}\n\t\t\topen={props.open}\n\t\t\textra={\n\t\t\t\t<Space>\n\t\t\t\t\t<CloseOutlined onClick={props.onClose} />\n\t\t\t\t</Space>\n\t\t\t}\n\t\t>\n\t\t\t<Form\n\t\t\t\tlabelCol={{ span: 6 }}\n\t\t\t\twrapperCol={{ span: 18 }}\n\t\t\t\tlayout=\"horizontal\"\n\t\t\t\tform={form}\n\t\t\t\tonFinish={onFinish}\n\t\t\t\tinitialValues={{ sex: '0', status: '0' }}\n\t\t\t>\n\t\t\t\t<Form.Item label=\"登录名\" name=\"loginName\" rules={[{ required: true }]}>\n\t\t\t\t\t<Input placeholder=\"请输入登录名\" />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"用户名\" name=\"userName\" rules={[{ required: true }]}>\n\t\t\t\t\t<Input placeholder=\"请输入用户名\" />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"密码\" name=\"password\" rules={[{ required: true }]}>\n\t\t\t\t\t<Input.Password placeholder=\"请输入密码\" />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"确认密码\" name=\"repassword\" rules={[{ required: true }]}>\n\t\t\t\t\t<Input.Password placeholder=\"请再次输入密码\" />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"性别\" name=\"sex\" rules={[{ required: true }]}>\n\t\t\t\t\t<Radio.Group>\n\t\t\t\t\t\t<Radio value='0'>男</Radio>\n\t\t\t\t\t\t<Radio value='1'>女</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"邮箱\" name=\"email\">\n\t\t\t\t\t<Input placeholder=\"请输入邮箱\" />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"手机号\" name=\"phonenumber\">\n\t\t\t\t\t<Input placeholder=\"请输入手机号\" />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"状态\" name=\"status\" rules={[{ required: true }]}>\n\t\t\t\t\t<Radio.Group>\n\t\t\t\t\t\t<Radio value='0'>正常</Radio>\n\t\t\t\t\t\t<Radio value='1'>停用</Radio>\n\t\t\t\t\t</Radio.Group>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"头像\" valuePropName=\"fileList\" getValueFromEvent={normFile}>\n\t\t\t\t\t<Upload onPreview={handlePreview} action=\"http://localhost:3000/file/upload\" listType=\"picture-card\" onChange={onUploadChange} maxCount={1} onRemove={onRemove}>\n\t\t\t\t\t\t<PlusOutlined />\n\t\t\t\t\t</Upload>\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item\n\t\t\t\t\tname=\"remark\"\n\t\t\t\t\tlabel=\"备注\"\n\t\t\t\t>\n\t\t\t\t\t<Input.TextArea rows={4} showCount maxLength={100} />\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item wrapperCol={{ offset: 6, span: 18 }}>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\t确定\n\t\t\t\t\t</Button>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t\t<Modal open={previewOpen} title={previewTitle} footer={null} onCancel={handleCancel}>\n\t\t\t\t<img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\n\t\t\t</Modal>\n\t\t</Drawer>\n\t);\n};\nexport default CreateUserPage;","import http from \"../../index\"\nimport { ReqPage, ResPage } from \"../../interface\";\nimport { User } from \"../../interface/system/user\";\n\n// 新增用户\nexport const addUser = (params: User.CreateUserForm) => {\n    return http.post<User.ResUser>('users', params);\n};\n\n// 获取用户列表\nexport const getUserList = (params: ReqPage) => {\n    return http.get<ResPage<User.ResUser>>('users', params);\n};\n\n// 删除用户\nexport const deleteUser = (id: string) => {\n    return http.delete<ResPage<User.ResUser>>(`users/${id}`);\n};","import { deleteUser, getUserList } from \"@/api/modules/system/user\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport { Avatar, Button, Card, Modal, Space, Table, message } from \"antd\";\nimport { ColumnsType } from \"antd/es/table\";\nimport { useEffect, useState } from \"react\";\nimport CreateUserPage from \"./components/createUserPage\";\n\ninterface DataType {\n    key: React.Key;\n    userId: string;\n    loginName: string;\n    userName: string;\n    sex: string;\n    email: string;\n    phonenumber: string;\n    status: string;\n    avatar: any;\n    createdAt: string;\n}\n\nconst UserList: React.FC = () => {\n\n    const [pageNum, setPageNum] = useState(1);\n    const [pageSize, setPageSize] = useState(10);\n    const [userTotal, setUserTotal] = useState(0);\n    const [userList, setUserList] = useState<DataType[]>([]);\n    const [showCreatePage, setShowCreatePage] = useState(false);\n    const [showConfirm, setShowConfirm] = useState(false);\n    const [actionId, setActionId] = useState('');\n\n    const initUserList = async () => {\n        const result = await getUserList({ pageNum, pageSize });\n        if (result.data) {\n            console.log(result.data);\n            setUserTotal(result.data.total);\n            setUserList(result.data.data as []);\n        }\n    };\n\n    useEffect(() => {\n        initUserList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    useEffect(() => {\n        initUserList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [pageNum, pageSize])\n\n    const columns: ColumnsType<DataType> = [\n        {\n            title: '登录名',\n            dataIndex: 'loginName',\n            width: 100,\n        },\n        {\n            title: '用户名',\n            dataIndex: 'userName',\n            width: 100,\n        },\n        {\n            title: '性别',\n            dataIndex: 'sex',\n            width: 50,\n            render: (_, record) => (\n                <Space size=\"middle\">\n                    {record.sex === '0' ? '男' : '女'}\n                </Space>\n            ),\n        },\n        {\n            title: '邮箱',\n            dataIndex: 'email',\n            width: 100,\n        },\n        {\n            title: '手机号',\n            dataIndex: 'phonenumber',\n            width: 100,\n        },\n        {\n            title: '状态',\n            dataIndex: 'status',\n            width: 50,\n            render: (_, record) => (\n                <Space size=\"middle\">\n                    {record.status === '0' ? '正常' : '停用'}\n                </Space>\n            ),\n        },\n        {\n            title: '头像',\n            dataIndex: 'avatar',\n            width: 100,\n            render: (_, record) => (\n                <Space size=\"middle\">\n                    {record.avatar ? <Avatar src={record.avatar.url} /> : ''}\n                </Space>\n            ),\n        },\n        {\n            title: '创建时间',\n            dataIndex: 'createdAt',\n            width: 100,\n        },\n        {\n            title: '操作',\n            width: 100,\n            render: (_, record) => (\n                <Space size=\"middle\">\n                    <Button type=\"link\">修改</Button><Button type=\"link\" danger onClick={e => { setActionId(record.userId); setShowConfirm(true) }}>删除</Button>\n                </Space>\n            ),\n        },\n    ];\n\n    const confirmDelete = async () => {\n        setShowConfirm(false);\n        const result = await deleteUser(actionId);\n        if(result.code === 200){\n            message.success('删除成功');\n        }\n    }\n\n    const cancelDelete = () => {\n        setShowConfirm(false);\n    }\n\n    const pagination = {\n        showSizeChanger: true,\n        onChange: (page: number, pageSize: number) => {\n            setPageNum(page);\n            setPageSize(pageSize);\n        },\n        defaultCurrent: pageNum,\n        total: userTotal\n    }\n    return (<div>\n        <Card>\n            <Button type=\"primary\" icon={<PlusOutlined />} onClick={e => setShowCreatePage(true)}>新增用户</Button>\n        </Card>\n        <Card title=\"用户列表\" style={{ marginTop: '20px' }}>\n            <Table rowKey={(record) => record.userId} pagination={pagination} columns={columns} dataSource={userList} />\n        </Card>\n        <Modal title=\"提示!\" open={showConfirm} onOk={confirmDelete} onCancel={cancelDelete}>\n            确认删除？\n        </Modal>\n        <CreateUserPage onSuccess={() => { setShowCreatePage(false); initUserList(); }} open={showCreatePage} onClose={() => setShowCreatePage(false)}></CreateUserPage>\n    </div>);\n}\n\nexport default UserList;"],"names":["getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","props","_Form$useForm","Form","useForm","form","_slicedToArray","_useState","useState","_useState2","avatar","setAvatar","_useState3","_useState4","previewOpen","setPreviewOpen","_useState5","_useState6","previewImage","setPreviewImage","_useState7","_useState8","previewTitle","setPreviewTitle","onFinish","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","wrap","_context","prev","next","console","log","params","loginName","userName","password","phonenumber","email","sex","status","remark","http","post","resetFields","message","success","onSuccess","t0","stop","_x","apply","arguments","handlePreview","_ref3","_callee2","_context2","url","preview","originFileObj","sent","name","substring","lastIndexOf","_x2","_jsxs","Drawer","title","placement","width","closable","open","extra","_jsx","Space","children","CloseOutlined","onClick","onClose","labelCol","span","wrapperCol","layout","initialValues","Item","label","rules","required","Input","placeholder","Password","Radio","value","valuePropName","getValueFromEvent","e","Array","isArray","fileList","Upload","onPreview","action","listType","onChange","_ref2","event","response","code","data","fileId","maxCount","onRemove","PlusOutlined","TextArea","rows","showCount","maxLength","offset","Button","type","htmlType","Modal","footer","onCancel","alt","style","src","pageNum","setPageNum","pageSize","setPageSize","userTotal","setUserTotal","userList","setUserList","_useState9","_useState10","showCreatePage","setShowCreatePage","_useState11","_useState12","showConfirm","setShowConfirm","_useState13","_useState14","actionId","setActionId","initUserList","get","total","useEffect","columns","dataIndex","render","_","record","size","Avatar","danger","userId","confirmDelete","id","delete","concat","pagination","showSizeChanger","page","defaultCurrent","Card","icon","marginTop","Table","rowKey","dataSource","onOk","CreateUserPage"],"sourceRoot":""}