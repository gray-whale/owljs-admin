"use strict";(self.webpackChunkmonitor_admin=self.webpackChunkmonitor_admin||[]).push([[3896],{3896:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(4689);var r=a(9286),l=a(1773),n=a(9367),i=a(2641),d=a(5722),o=a(6473),c=a(2954),u=a(2107),h=a(2791),x=a(3070),m=a(7828),p=a(9389),Z=a(4424),j=a(4941),w=a(5070);const v=w.Z;v.Dragger=j.Z,v.LIST_IGNORE=w.E;const I=v;var g=a(732),b=a(3329);const f=e=>{const[s]=x.Z.useForm(),[a,n]=(0,h.useState)(""),[o,c]=(0,h.useState)(!1),[j,w]=(0,h.useState)(""),[v,f]=(0,h.useState)("");return(0,b.jsxs)(m.Z,{title:"\u6dfb\u52a0\u7528\u6237",placement:"right",width:500,closable:!1,open:e.open,extra:(0,b.jsx)(l.Z,{children:(0,b.jsx)(g.Z,{onClick:e.onClose})}),children:[(0,b.jsxs)(x.Z,{labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",form:s,onFinish:async r=>{try{await(l={loginName:r.loginName,userName:r.userName,password:r.password,phonenumber:r.phonenumber,email:r.email,sex:r.sex,avatar:a,status:r.status,remark:r.remark},t.Z.post("users",l)),s.resetFields(),d.ZP.success("\u521b\u5efa\u6210\u529f"),e.onSuccess()}catch(n){console.log(n)}var l},initialValues:{sex:"0",status:"0"},children:[(0,b.jsx)(x.Z.Item,{label:"\u767b\u5f55\u540d",name:"loginName",rules:[{required:!0}],children:(0,b.jsx)(p.Z,{placeholder:"\u8bf7\u8f93\u5165\u767b\u5f55\u540d"})}),(0,b.jsx)(x.Z.Item,{label:"\u7528\u6237\u540d",name:"userName",rules:[{required:!0}],children:(0,b.jsx)(p.Z,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})}),(0,b.jsx)(x.Z.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0}],children:(0,b.jsx)(p.Z.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),(0,b.jsx)(x.Z.Item,{label:"\u786e\u8ba4\u5bc6\u7801",name:"repassword",rules:[{required:!0}],children:(0,b.jsx)(p.Z.Password,{placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801"})}),(0,b.jsx)(x.Z.Item,{label:"\u6027\u522b",name:"sex",rules:[{required:!0}],children:(0,b.jsxs)(Z.ZP.Group,{children:[(0,b.jsx)(Z.ZP,{value:"0",children:"\u7537"}),(0,b.jsx)(Z.ZP,{value:"1",children:"\u5973"})]})}),(0,b.jsx)(x.Z.Item,{label:"\u90ae\u7bb1",name:"email",children:(0,b.jsx)(p.Z,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})}),(0,b.jsx)(x.Z.Item,{label:"\u624b\u673a\u53f7",name:"phonenumber",children:(0,b.jsx)(p.Z,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})}),(0,b.jsx)(x.Z.Item,{label:"\u72b6\u6001",name:"status",rules:[{required:!0}],children:(0,b.jsxs)(Z.ZP.Group,{children:[(0,b.jsx)(Z.ZP,{value:"0",children:"\u6b63\u5e38"}),(0,b.jsx)(Z.ZP,{value:"1",children:"\u505c\u7528"})]})}),(0,b.jsx)(x.Z.Item,{label:"\u5934\u50cf",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:null===e||void 0===e?void 0:e.fileList,children:(0,b.jsx)(I,{onPreview:async e=>{e.url||e.preview||(e.preview=await(e=>new Promise(((s,a)=>{const t=new FileReader;t.readAsDataURL(e),t.onload=()=>s(t.result),t.onerror=e=>a(e)})))(e.originFileObj)),w(e.url||e.preview),c(!0),f(e.name||e.url.substring(e.url.lastIndexOf("/")+1))},action:"http://localhost:3000/file/upload",listType:"picture-card",onChange:e=>{let{file:s,fileList:a,event:t}=e;"done"===s.status&&s.response&&200===s.response.code&&n(s.response.data.fileId)},maxCount:1,onRemove:()=>{n("")},children:(0,b.jsx)(r.Z,{})})}),(0,b.jsx)(x.Z.Item,{name:"remark",label:"\u5907\u6ce8",children:(0,b.jsx)(p.Z.TextArea,{rows:4,showCount:!0,maxLength:100})}),(0,b.jsx)(x.Z.Item,{wrapperCol:{offset:6,span:18},children:(0,b.jsx)(i.ZP,{type:"primary",htmlType:"submit",children:"\u786e\u5b9a"})})]}),(0,b.jsx)(u.Z,{open:o,title:v,footer:null,onCancel:()=>c(!1),children:(0,b.jsx)("img",{alt:"example",style:{width:"100%"},src:j})})]})},y=()=>{const[e,s]=(0,h.useState)(1),[a,x]=(0,h.useState)(10),[m,p]=(0,h.useState)(0),[Z,j]=(0,h.useState)([]),[w,v]=(0,h.useState)(!1),[I,g]=(0,h.useState)(!1),[y,C]=(0,h.useState)(""),P=async()=>{const s=await(r={pageNum:e,pageSize:a},t.Z.get("users",r));var r;s.data&&(p(s.data.total),j(s.data.data))};(0,h.useEffect)((()=>{P()}),[]),(0,h.useEffect)((()=>{P()}),[e,a]);const S=[{title:"\u767b\u5f55\u540d",dataIndex:"loginName",width:100},{title:"\u7528\u6237\u540d",dataIndex:"userName",width:100},{title:"\u6027\u522b",dataIndex:"sex",width:100,render:(e,s)=>(0,b.jsx)(l.Z,{size:"middle",children:"0"===s.sex?"\u7537":"\u5973"})},{title:"\u90ae\u7bb1",dataIndex:"email",width:100},{title:"\u624b\u673a\u53f7",dataIndex:"phonenumber",width:100},{title:"\u72b6\u6001",dataIndex:"status",width:100,render:(e,s)=>(0,b.jsx)(l.Z,{size:"middle",children:"0"===s.status?"\u6b63\u5e38":"\u505c\u7528"})},{title:"\u5934\u50cf",dataIndex:"avatar",width:100,render:(e,s)=>(0,b.jsx)(l.Z,{size:"middle",children:s.avatar?(0,b.jsx)(n.C,{src:s.avatar.url}):""})},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",width:100},{title:"\u64cd\u4f5c",width:100,render:(e,s)=>(0,b.jsxs)(l.Z,{size:"middle",children:[(0,b.jsx)(i.ZP,{type:"link",children:"\u4fee\u6539"}),(0,b.jsx)(i.ZP,{type:"link",danger:!0,onClick:e=>{C(s.userId),g(!0)},children:"\u5220\u9664"})]})}],k={showSizeChanger:!0,onChange:(e,a)=>{s(e),x(a)},defaultCurrent:e,total:m};return(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Z,{children:(0,b.jsx)(i.ZP,{type:"primary",icon:(0,b.jsx)(r.Z,{}),onClick:e=>v(!0),children:"\u65b0\u589e\u7528\u6237"})}),(0,b.jsx)(o.Z,{title:"\u7528\u6237\u5217\u8868",style:{marginTop:"20px"},children:(0,b.jsx)(c.Z,{rowKey:e=>e.userId,pagination:k,columns:S,dataSource:Z})}),(0,b.jsx)(u.Z,{title:"\u63d0\u793a!",open:I,onOk:async()=>{g(!1);var e;200===(await(e=y,t.Z.delete("users/".concat(e)))).code&&(d.ZP.success("\u5220\u9664\u6210\u529f"),P())},onCancel:()=>{g(!1)},children:"\u786e\u8ba4\u5220\u9664\uff1f"}),(0,b.jsx)(f,{onSuccess:()=>{v(!1),P()},open:w,onClose:()=>v(!1)})]})}}}]);
//# sourceMappingURL=3896.6969b99f.chunk.js.map