{"version":3,"file":"static/js/5088.530bf35d.chunk.js","mappings":"6IAKO,MAAMA,EAAgBC,GAClBC,EAAAA,EAAKC,IAAuB,YAAaF,E,yHCQpD,MAoFA,EApFkBG,KACd,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,IAChCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAYC,IAAiBJ,EAAAA,EAAAA,UAAS,IACtCK,EAAWC,IAAgBN,EAAAA,EAAAA,UAAqB,KAChDO,EAAiBC,IAAsBR,EAAAA,EAAAA,UAAsB,KAC7DS,IAAgBC,EAAAA,EAAAA,OAChBC,EAAYC,GAAiBC,EAAAA,GAAQC,aAwBtCC,EAAe,CACjBR,kBACAS,SANoBC,IACpBT,EAAmBS,EAAmB,GAQpCC,EAAgBC,UAClB,MAAMC,EAAQX,EAAab,IAAI,SAC/B,IAAKwB,EAKD,YAJAT,EAAWU,KAAK,CACZC,KAAM,QACNC,QAAS,mCAIjB,MAAMC,QAAe/B,EAAAA,EAAAA,GAAa,CAAEK,UAASG,WAASmB,UACtD,GAAII,EAAOC,KAAM,CACbrB,EAAcoB,EAAOC,KAAKC,OAC1B,MAAMD,EAAmB,GACzBD,EAAOC,KAAKA,KAAKE,SAAQC,IACrBH,EAAKI,KAAK,CACNC,IAAKF,EAAKG,QACVC,KAAMJ,EAAKI,KACXC,QAASL,EAAKK,QACdC,WAAYN,EAAKM,YACnB,IAEN5B,EAAamB,EACjB,IAGJU,EAAAA,EAAAA,YAAU,KACNjB,GAAe,GAEhB,KAEHiB,EAAAA,EAAAA,YAAU,KACNjB,GAAe,GAEhB,CAACpB,EAASG,IAEb,MAAMmC,EAAa,CACfC,iBAAiB,EACjBrB,SAAUA,CAACsB,EAAcrC,KACrBF,EAAWuC,GACXpC,EAAYD,EAAS,EAEzBsC,eAAgBzC,EAChB4B,MAAOvB,GAGX,OAAQqC,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CAACC,MAAM,2BAAMC,SAAA,CAAE/B,GAAcgC,EAAAA,EAAAA,KAACC,EAAAA,EAAK,CAACC,MAAO,CAAEC,UAAW,QAAUhC,aAAcA,EAAcqB,WAAYA,EAAYY,QAxE5F,CACnC,CACIN,MAAO,qBACPO,UAAW,OACXC,MAAO,KAEX,CACIR,MAAO,iCACPO,UAAW,UACXC,MAAO,KAEX,CACIR,MAAO,6CACPO,UAAW,aACXC,MAAO,MA0DsIC,WAAY9C,MAAoB,C","sources":["api/modules/web/event.ts","views/miniapp/custom/event/index.tsx"],"sourcesContent":["import http from \"../../index\"\nimport { ResPage } from \"../../interface\";\nimport { ReqQuery, ResEvent } from \"@/api/interface/web/event\";\n\n// 获取事件列表\nexport const getEventList = (params: ReqQuery) => {\n    return http.get<ResPage<ResEvent>>('web/event', params);\n};","import { getEventList } from \"@/api/modules/web/event\";\nimport { Card, message } from \"antd\";\nimport Table, { ColumnsType } from \"antd/es/table\";\nimport { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\n\ninterface DataType {\n    key: React.Key;\n    name: string;\n    metrics: string;\n    categories: string;\n}\n\nconst EventList = () => {\n    const [pageNum, setPageNum] = useState(1);\n    const [pageSize, setPageSize] = useState(10);\n    const [eventTotal, setEventTotal] = useState(0);\n    const [eventList, setEventList] = useState<DataType[]>([]);\n    const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n    const [searchParams] = useSearchParams();\n    const [messageApi, contextHolder] = message.useMessage();\n\n    const columns: ColumnsType<DataType> = [\n        {\n            title: '事件名',\n            dataIndex: 'name',\n            width: 100,\n        },\n        {\n            title: '自定义数值',\n            dataIndex: 'metrics',\n            width: 200,\n        },\n        {\n            title: '事件本身的维度',\n            dataIndex: 'categories',\n            width: 200,\n        },\n    ];\n\n    const onSelectChange = (newSelectedRowKeys: React.Key[]) => {\n        setSelectedRowKeys(newSelectedRowKeys);\n    };\n\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: onSelectChange,\n    };\n\n    const initEventList = async () => {\n        const appId = searchParams.get('appId');\n        if (!appId) {\n            messageApi.open({\n                type: 'error',\n                content: 'appId不能为空!',\n            });\n            return;\n        }\n        const result = await getEventList({ pageNum, pageSize,appId });\n        if (result.data) {\n            setEventTotal(result.data.total);\n            const data: DataType[] = [];\n            result.data.data.forEach(item => {\n                data.push({\n                    key: item.eventId,\n                    name: item.name,\n                    metrics: item.metrics,\n                    categories: item.categories\n                })\n            });\n            setEventList(data);\n        }\n    };\n\n    useEffect(() => {\n        initEventList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    useEffect(() => {\n        initEventList();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [pageNum, pageSize])\n\n    const pagination = {\n        showSizeChanger: true,\n        onChange: (page: number, pageSize: number) => {\n            setPageNum(page);\n            setPageSize(pageSize);\n        },\n        defaultCurrent: pageNum,\n        total: eventTotal\n    }\n\n    return (<Card title=\"事件列表\">{contextHolder}<Table style={{ marginTop: '12px' }} rowSelection={rowSelection} pagination={pagination} columns={columns} dataSource={eventList} /></Card>);\n}\n\nexport default EventList;"],"names":["getEventList","params","http","get","EventList","pageNum","setPageNum","useState","pageSize","setPageSize","eventTotal","setEventTotal","eventList","setEventList","selectedRowKeys","setSelectedRowKeys","searchParams","useSearchParams","messageApi","contextHolder","message","useMessage","rowSelection","onChange","newSelectedRowKeys","initEventList","async","appId","open","type","content","result","data","total","forEach","item","push","key","eventId","name","metrics","categories","useEffect","pagination","showSizeChanger","page","defaultCurrent","_jsxs","Card","title","children","_jsx","Table","style","marginTop","columns","dataIndex","width","dataSource"],"sourceRoot":""}